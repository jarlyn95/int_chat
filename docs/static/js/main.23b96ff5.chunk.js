(this["webpackJsonpchatui-demo"]=this["webpackJsonpchatui-demo"]||[]).push([[0],{51:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(8),o=n.n(a),i=n(6),s=(n(33),n(4)),l=n(12),u=n.n(l);var d=n(0);function b(e){var t=Object(c.useRef)(null);return Object(c.useEffect)((function(){e&&("function"===typeof e?e(t.current):e.current=t.current)}),[e]),t}var j=n(14),f=n(2);function m(){var e=2147483648;return Math.floor(Math.random()*e).toString(36)+Math.abs(Math.floor(Math.random()*e)^Date.now()).toString(36)}var v=0,O=function(e,t){var n=e.createdAt||Date.now(),c=e.hasTime||n-v>3e5;return c&&(v=n),Object(f.a)(Object(f.a)({},e),{},{_id:e._id||t||m(),createdAt:n,position:e.position||"left",hasTime:c})},h="_TYPING_";var p=function(e){var t=e.active,n=void 0!==t&&t,r=e.ref,a=e.delay,o=void 0===a?300:a,s=Object(c.useState)(!1),l=Object(i.a)(s,2),u=l[0],d=l[1],b=Object(c.useState)(!1),j=Object(i.a)(b,2),f=j[0],m=j[1],v=Object(c.useRef)();return Object(c.useEffect)((function(){n?(v.current&&clearTimeout(v.current),m(n)):(d(n),v.current=setTimeout((function(){m(n)}),o))}),[n,o]),Object(c.useEffect)((function(){r.current&&r.current.offsetHeight,d(f)}),[f,r]),{didMount:f,isShow:u}};var g=n(5),x=n(9),C=n(10),k=n(28),w=n(27),y=["FallbackComponent","children"];r.a.Component;var N=function(e){var t=e.className,n=e.src,c=e.alt,r=e.url,a=e.size,o=void 0===a?"md":a,i=e.shape,l=void 0===i?"circle":i,u=e.children,b=r?"a":"span";return Object(d.jsx)(b,{className:Object(s.a)("Avatar","Avatar--".concat(o),"Avatar--".concat(l),t),href:r,children:n?Object(d.jsx)("img",{src:n,alt:c}):u})},T=["className","active","onClick"],S=function(e){var t=e.className,n=e.active,c=e.onClick,r=Object(g.a)(e,T);return Object(d.jsx)("div",Object(f.a)({className:Object(s.a)("Backdrop",t,{active:n}),onClick:c,role:"button",tabIndex:-1,"aria-hidden":!0},r))},R=["type","content","children"],E=function(e){var t=e.type,n=void 0===t?"text":t,c=e.content,r=e.children,a=Object(g.a)(e,R);return Object(d.jsxs)("div",Object(f.a)(Object(f.a)({className:"Bubble ".concat(n),"data-type":n},a),{},{children:[c&&Object(d.jsx)("p",{children:c}),r]}))},M=["type","className","spin","name"],H=function(e){var t=e.type,n=e.className,c=e.spin,r=e.name,a=Object(g.a)(e,M),o="string"===typeof r?{"aria-label":r}:{"aria-hidden":!0};return Object(d.jsx)("svg",Object(f.a)(Object(f.a)(Object(f.a)({className:Object(s.a)("Icon",{"is-spin":c},n)},o),a),{},{children:Object(d.jsx)("use",{xlinkHref:"#icon-".concat(t)})}))},L=["className","label","color","variant","size","icon","loading","block","disabled","children","onClick"];function I(e){return e&&"Btn--".concat(e)}var B=function(e){var t=e.className,n=e.label,c=e.color,r=e.variant,a=e.size,o=e.icon,i=e.loading,l=e.block,u=e.disabled,b=e.children,j=e.onClick,m=Object(g.a)(e,L),v=o||i&&"spinner",O=a||(l?"lg":"");return Object(d.jsxs)("button",Object(f.a)(Object(f.a)({className:Object(s.a)("Btn",I(c),I(r),I(O),{"Btn--block":l},t),type:"button",disabled:u,onClick:function(e){u||i||!j||j(e)}},m),{},{children:[v&&Object(d.jsx)("span",{className:"Btn-icon",children:Object(d.jsx)(H,{type:v,spin:i})}),n||b]}))},_=["as","className","inline","center","direction","wrap","justifyContent","justify","alignItems","align","children"],Y={row:"Flex--d-r","row-reverse":"Flex--d-rr",column:"Flex--d-c","column-reverse":"Flex--d-cr"},A={nowrap:"Flex--w-n",wrap:"Flex--w-w","wrap-reverse":"Flex--w-wr"},F={"flex-start":"Flex--jc-fs","flex-end":"Flex--jc-fe",center:"Flex--jc-c","space-between":"Flex--jc-sb","space-around":"Flex--jc-sa"},P={"flex-start":"Flex--ai-fs","flex-end":"Flex--ai-fe",center:"Flex--ai-c"},D=r.a.forwardRef((function(e,t){var n=e.as,c=void 0===n?"div":n,r=e.className,a=e.inline,o=e.center,i=e.direction,l=e.wrap,u=e.justifyContent,b=e.justify,j=void 0===b?u:b,m=e.alignItems,v=e.align,O=void 0===v?m:v,h=e.children,p=Object(g.a)(e,_);return Object(d.jsx)(c,Object(f.a)(Object(f.a)({className:Object(s.a)("Flex",i&&Y[i],j&&F[j],O&&P[O],l&&A[l],{"Flex--inline":a,"Flex--center":o},r),ref:t},p),{},{children:h}))})),z=function(e,t){e.style.transform=t,e.style.webkitTransform=t},V={passiveListener:function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(n){}return e},smoothScroll:function(){return"scrollBehavior"in document.documentElement.style},touch:function(){return"ontouchstart"in window}};function W(e){return V[e]()}W("touch");var q=["children","onClick","mouseEvent"],Q=document,G=Q.documentElement,K=function(e){var t=e.children,n=e.onClick,r=e.mouseEvent,a=void 0===r?"mouseup":r,o=Object(g.a)(e,q),i=Object(c.useRef)(null);function s(e){i.current&&G.contains(e.target)&&!i.current.contains(e.target)&&n(e)}return Object(c.useEffect)((function(){return a&&Q.addEventListener(a,s),function(){Q.removeEventListener(a,s)}})),Object(d.jsx)("div",Object(f.a)(Object(f.a)({ref:i},o),{},{children:t}))},J=r.a.createContext(""),U=["className","icon","img"],X=function(e){var t=e.className,n=e.icon,c=e.img,r=Object(g.a)(e,U);return Object(d.jsxs)(B,Object(f.a)(Object(f.a)({className:Object(s.a)("IconBtn",t)},r),{},{children:[n&&Object(d.jsx)(H,{type:n}),!n&&c&&Object(d.jsx)("img",{src:c,alt:""})]}))};function Z(e){return e.scrollHeight-e.scrollTop-e.offsetHeight}var $=["className","type","variant","value","placeholder","rows","minRows","maxRows","maxLength","showCount","multiline","autoSize","onChange"];function ee(e,t){return"".concat("".concat(e).length).concat(t?"/".concat(t):"")}var te=r.a.forwardRef((function(e,t){var n=e.className,r=e.type,a=void 0===r?"text":r,o=e.variant,l=e.value,u=e.placeholder,j=e.rows,m=void 0===j?1:j,v=e.minRows,O=void 0===v?m:v,h=e.maxRows,p=void 0===h?5:h,x=e.maxLength,C=e.showCount,k=void 0===C?!!x:C,w=e.multiline,y=e.autoSize,N=e.onChange,T=Object(g.a)(e,$),S=m;S<O?S=O:S>p&&(S=p);var R=Object(c.useState)(S),E=Object(i.a)(R,2),M=E[0],H=E[1],L=Object(c.useState)(21),I=Object(i.a)(L,2),B=I[0],_=I[1],Y=b(t),A=Object(c.useContext)(J),F=o||("light"===A?"flushed":"outline"),P=w||y||m>1?"textarea":"input";Object(c.useEffect)((function(){if(Y.current){var e=getComputedStyle(Y.current,null).lineHeight,t=Number(e.replace("px",""));t!==B&&_(t)}}),[Y,B]);var D=Object(c.useCallback)((function(){if(y&&Y.current){var e=Y.current,t=e.rows;e.rows=O,u&&(e.placeholder="");var n=~~(e.scrollHeight/B);n===t&&(e.rows=n),n>=p&&(e.rows=p,e.scrollTop=e.scrollHeight),H(n<p?n:p),u&&(e.placeholder=u)}}),[y,Y,B,p,O,u]);Object(c.useEffect)((function(){""===l?H(S):D()}),[S,D,l]);var z=Object(c.useCallback)((function(e){if(D(),N){var t=e.target.value,n=x&&t.length>x?t.substr(0,x):t;N(n,e)}}),[x,N,D]),V=Object(d.jsx)(P,Object(f.a)({className:Object(s.a)("Input","Input--".concat(F),n),type:a,value:l,placeholder:u,maxLength:x,ref:Y,rows:M,onChange:z},T));return k?Object(d.jsxs)("div",{className:Object(s.a)("InputWrapper",{"has-counter":k}),children:[V,k&&Object(d.jsx)("div",{className:"Input-counter",children:ee(l,x)})]}):V})),ne={BackBottom:{newMsgOne:"{n} \u0631\u0633\u0627\u0644\u0629 \u062c\u062f\u064a\u062f\u0629",newMsgOther:"{n} \u0631\u0633\u0627\u0644\u0629 \u062c\u062f\u064a\u062f\u0629",bottom:"\u0627\u0644\u0623\u0633\u0641\u0644"},Time:{weekdays:"\u0627\u0644\u0623\u062d\u062f_\u0627\u0644\u0625\u062b\u0646\u064a\u0646_\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621_\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621_\u0627\u0644\u062e\u0645\u064a\u0633_\u0627\u0644\u062c\u0645\u0639\u0629_\u0627\u0644\u0633\u0628\u062a".split("_"),formats:{LT:"HH:mm",lll:"YYYY/M/D HH:mm",WT:"HH:mm dddd",YT:"HH:mm \u0623\u0645\u0633"}},Composer:{send:"\u0625\u0631\u0633\u0627\u0644"},SendConfirm:{title:"\u0625\u0631\u0633\u0627\u0644 \u0635\u0648\u0631\u0629",send:"\u0623\u0631\u0633\u0644",cancel:"\u0625\u0644\u063a\u0627\u0621"},RateActions:{up:"\u0627\u0644\u062a\u0635\u0648\u064a\u062a",down:"\u062a\u0635\u0648\u064a\u062a \u0633\u0644\u0628\u064a"},Recorder:{hold2talk:"\u0623\u0633\u062a\u0645\u0631 \u0628\u0627\u0644\u0636\u063a\u0637 \u0644\u062a\u062a\u062d\u062f\u062b",release2send:"\u062d\u0631\u0631 \u0644\u0644\u0625\u0631\u0633\u0627\u0644",releaseOrSwipe:"\u062d\u0631\u0631 \u0644\u0644\u0625\u0631\u0633\u0627\u0644 \u060c \u0627\u0633\u062d\u0628 \u0644\u0623\u0639\u0644\u0649 \u0644\u0644\u0625\u0644\u063a\u0627\u0621",release2cancel:"\u062d\u0631\u0631 \u0644\u0644\u0625\u0644\u063a\u0627\u0621"},Search:{search:"\u064a\u0628\u062d\u062b"}},ce={BackBottom:{newMsgOne:"{n} new message",newMsgOther:"{n} new messages",bottom:"Bottom"},Time:{weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),formats:{LT:"HH:mm",lll:"M/D/YYYY HH:mm",WT:"dddd HH:mm",YT:"Yesterday HH:mm"}},Composer:{send:"Send"},SendConfirm:{title:"Send photo",send:"Send",cancel:"Cancel"},RateActions:{up:"Up vote",down:"Down vote"},Recorder:{hold2talk:"Hold to Talk",release2send:"Release to Send",releaseOrSwipe:"Release to send, swipe up to cancel",release2cancel:"Release to cancel"},Search:{search:"Search"}},re={"ar-EG":ne,"fr-FR":{BackBottom:{newMsgOne:"{n}\xa0nouveau message",newMsgOther:"{n}\xa0nouveau messages",bottom:"Fond"},Time:{weekdays:"Dimanche_Lundi_Mardi_Mercredi_Jeudi_Vendredi_Samedi".split("_"),formats:{LT:"HH:mm",lll:"D/M/YYYY HH:mm",WT:"dddd HH:mm",YT:"Hier HH:mm"}},Composer:{send:"Envoyer"},SendConfirm:{title:"Envoyer une photo",send:"Envoyer",cancel:"Annuler"},RateActions:{up:"Voter pour",down:"Vote n\xe9gatif"},Recorder:{hold2talk:"Tenir pour parler",release2send:"Lib\xe9rer pour envoyer",releaseOrSwipe:"Rel\xe2chez pour envoyer, balayez vers le haut pour annuler",release2cancel:"Rel\xe2cher pour annuler"},Search:{search:"Chercher"}},"en-US":ce,"zh-CN":{BackBottom:{newMsgOne:"{n}\u6761\u65b0\u6d88\u606f",newMsgOther:"{n}\u6761\u65b0\u6d88\u606f",bottom:"\u56de\u5230\u5e95\u90e8"},Time:{weekdays:"\u661f\u671f\u65e5_\u661f\u671f\u4e00_\u661f\u671f\u4e8c_\u661f\u671f\u4e09_\u661f\u671f\u56db_\u661f\u671f\u4e94_\u661f\u671f\u516d".split("_"),formats:{LT:"HH:mm",lll:"YYYY\u5e74M\u6708D\u65e5 HH:mm",WT:"dddd HH:mm",YT:"\u6628\u5929 HH:mm"}},Composer:{send:"\u53d1\u9001"},SendConfirm:{title:"\u53d1\u9001\u56fe\u7247",send:"\u53d1\u9001",cancel:"\u53d6\u6d88"},RateActions:{up:"\u8d5e\u540c",down:"\u53cd\u5bf9"},Recorder:{hold2talk:"\u6309\u4f4f \u8bf4\u8bdd",release2send:"\u677e\u5f00 \u53d1\u9001",releaseOrSwipe:"\u677e\u5f00\u53d1\u9001\uff0c\u4e0a\u6ed1\u53d6\u6d88",release2cancel:"\u677e\u5f00\u624b\u6307\uff0c\u53d6\u6d88\u53d1\u9001"},Search:{search:"\u641c\u7d22"}}},ae=r.a.createContext(void 0),oe="en-US",ie=function(e){var t=e.locale,n=e.locales,c=e.children;return Object(d.jsx)(ae.Provider,{value:{locale:t,locales:n},children:c})};ie.defaultProps={locale:oe};var se=function(e,t){var n=Object(c.useContext)(ae),r=n||{},a=r.locale,o=r.locales,i=a&&re[a]||re[oe],s=o?Object(f.a)(Object(f.a)({},i),o):i;return!n&&t?s=t:e&&(s=s[e]||{}),{locale:a,trans:function(e){return e?s[e]:s}}},le=function(e){var t=e.className,n=e.content,c=e.action;return Object(d.jsx)("div",{className:Object(s.a)("Message SystemMessage",t),children:Object(d.jsxs)("div",{className:"SystemMessage-inner",children:[Object(d.jsx)("span",{children:n}),c&&Object(d.jsx)("a",{href:"javascript:;",onClick:c.onClick,children:c.text})]})})},ue=/YYYY|M|D|dddd|HH|mm/g,de=864e5,be=function(e){return e instanceof Date?e:new Date(e)},je=function(e){return(e<=9?"0":"")+e},fe=function(e){var t=new Date((new Date).setHours(0,0,0,0)).getTime()-e.getTime();return t<0?"LT":t<de?"YT":t<6048e5?"WT":"lll"};var me=function(e,t){var n=be(e),c=t.formats[fe(n)],r={YYYY:"".concat(n.getFullYear()),M:"".concat(n.getMonth()+1),D:"".concat(n.getDate()),dddd:t.weekdays[n.getDay()],HH:je(n.getHours()),mm:je(n.getMinutes())};return c.replace(ue,(function(e){return r[e]}))},ve=function(e){var t=e.date,n=se("Time").trans;return Object(d.jsx)("time",{className:"Time",dateTime:new Date(t).toJSON(),children:me(t,n())})};function Oe(){return Object(d.jsx)(E,{type:"typing",children:Object(d.jsxs)("div",{className:"Typing","aria-busy":"true",children:[Object(d.jsx)("div",{className:"Typing-dot"}),Object(d.jsx)("div",{className:"Typing-dot"}),Object(d.jsx)("div",{className:"Typing-dot"})]})})}var he=["renderMessageContent"],pe=function(e){var t=e.renderMessageContent,n=void 0===t?function(){return null}:t,c=Object(g.a)(e,he),r=c.type,a=c.content,o=c.user,i=void 0===o?{}:o,l=c._id,u=c.position,b=void 0===u?"left":u,j=c.hasTime,f=void 0===j||j,m=c.createdAt,v=i.name,O=i.avatar;if("system"===r)return Object(d.jsx)(le,{content:a.text,action:a.action});var h="right"===b||"left"===b;return Object(d.jsxs)("div",{className:Object(s.a)("Message",b),"data-id":l,"data-type":r,children:[f&&m&&Object(d.jsx)("div",{className:"Message-meta",children:Object(d.jsx)(ve,{date:m})}),Object(d.jsxs)("div",{className:"Message-main",children:[h&&O&&Object(d.jsx)(N,{src:O,alt:v,url:i.url}),Object(d.jsxs)("div",{className:"Message-inner",children:[h&&v&&Object(d.jsx)("div",{className:"Message-author",children:v}),Object(d.jsx)("div",{className:"Message-content",role:"alert","aria-live":"assertive","aria-atomic":"false",children:"typing"===r?Object(d.jsx)(Oe,{}):n(c)})]})]})]})},ge=r.a.memo(pe),xe=0,Ce=function(){return xe++};function ke(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id-";return Object(c.useRef)("".concat(e).concat(Ce())).current}var we=function(e,t){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:document.body).classList[t?"add":"remove"](e)};function ye(){document.querySelector(".Modal")||document.querySelector(".Popup")||we("S--modalOpen",!1)}var Ne=function(e){var t=e.baseClass,n=e.active,r=e.className,o=e.title,i=e.showClose,l=void 0===i||i,u=e.autoFocus,b=void 0===u||u,j=e.backdrop,m=void 0===j||j,v=e.height,O=e.overflow,h=e.actions,g=e.vertical,x=void 0===g||g,C=e.btnVariant,k=e.bgColor,w=e.children,y=e.onBackdropClick,N=e.onClose,T=ke("modal-"),R=e.titleId||T,E=Object(c.useRef)(null),M=p({active:n,ref:E}),H=M.didMount,L=M.isShow;if(Object(c.useEffect)((function(){setTimeout((function(){b&&E.current&&E.current.focus()}))}),[b]),Object(c.useEffect)((function(){L&&we("S--modalOpen",L)}),[L]),Object(c.useEffect)((function(){n||H||ye()}),[n,H]),Object(c.useEffect)((function(){return function(){ye()}}),[]),!H)return null;var I="Popup"===t;return Object(a.createPortal)(Object(d.jsxs)("div",{className:Object(s.a)(t,r,{active:L}),ref:E,tabIndex:-1,children:[m&&Object(d.jsx)(S,{active:L,onClick:!0===m?y||N:void 0}),Object(d.jsx)("div",{className:Object(s.a)("".concat(t,"-dialog"),{"pb-safe":I&&!h}),"data-bg-color":k,"data-height":I&&v?v:void 0,role:"dialog","aria-labelledby":R,"aria-modal":!0,children:Object(d.jsxs)("div",{className:"".concat(t,"-content"),children:[Object(d.jsxs)("div",{className:"".concat(t,"-header"),children:[Object(d.jsx)("h5",{className:"".concat(t,"-title"),id:R,children:o}),l&&N&&Object(d.jsx)(X,{className:"".concat(t,"-close"),icon:"close",size:"lg",onClick:N,"aria-label":"\u5173\u95ed"})]}),Object(d.jsx)("div",{className:Object(s.a)("".concat(t,"-body"),{overflow:O}),children:w}),h&&Object(d.jsx)("div",{className:"".concat(t,"-footer ").concat(t,"-footer--").concat(x?"v":"h"),"data-variant":C||"round",children:h.map((function(e){return Object(c.createElement)(B,Object(f.a)(Object(f.a)({size:"lg",block:I,variant:C},e),{},{key:e.label}))}))})]})})]}),document.body)},Te=function(e){return Object(d.jsx)(Ne,Object(f.a)({baseClass:"Modal",btnVariant:!1===e.vertical?void 0:"outline"},e))},Se=function(e){var t=e.className,n=e.title,r=e.logo,a=e.leftContent,o=e.rightContent,i=void 0===o?[]:o;return Object(d.jsxs)("header",{className:Object(s.a)("Navbar",t),children:[Object(d.jsx)("div",{className:"Navbar-left",children:a&&Object(d.jsx)(X,Object(f.a)({size:"lg"},a))}),Object(d.jsx)("div",{className:"Navbar-main",children:r?Object(d.jsx)("img",{className:"Navbar-logo",src:r,alt:n}):Object(d.jsx)("h2",{className:"Navbar-title",children:n})}),Object(d.jsx)("div",{className:"Navbar-right",children:i.map((function(e){return Object(c.createElement)(X,Object(f.a)(Object(f.a)({size:"lg"},e),{},{key:e.icon}))}))})]})};"Intl"in window&&Intl.NumberFormat.prototype.formatToParts;var Re=requestAnimationFrame;function Ee(e){var t=e.el,n=e.to,c=e.duration,r=void 0===c?300:c,a=e.x,o=0,i=a?"scrollLeft":"scrollTop",s=t[i],l=Math.round(r/16),u=(n-s)/l;Re?function e(){t[i]+=u,++o<l&&Re(e)}():t[i]=n}var Me=W("passiveListener"),He=!!Me&&{passive:!0},Le=!!Me&&{passive:!1},Ie=r.a.forwardRef((function(e,t){var n=e.distance,a=void 0===n?30:n,o=e.loadingDistance,l=void 0===o?30:o,u=e.maxDistance,b=e.distanceRatio,j=void 0===b?2:b,f=e.loadMoreText,m=void 0===f?"\u70b9\u51fb\u52a0\u8f7d\u66f4\u591a":f,v=e.children,O=e.onScroll,h=e.onRefresh,p=e.renderIndicator,g=void 0===p?function(e){return"active"===e||"loading"===e?Object(d.jsx)(H,{className:"PullToRefresh-spinner",type:"spinner",spin:!0}):null}:p,x=Object(c.useRef)(null),C=Object(c.useRef)(null),k=Object(c.useState)(0),w=Object(i.a)(k,2),y=w[0],N=w[1],T=Object(c.useState)("pending"),S=Object(i.a)(T,2),R=S[0],E=S[1],M=Object(c.useState)(!1),L=Object(i.a)(M,2),I=L[0],_=L[1],Y=Object(c.useState)(!e.onRefresh),A=Object(i.a)(Y,2),F=A[0],P=A[1],V=Object(c.useRef)({}),q=Object(c.useRef)(R),Q=Object(c.useRef)(),G=Object(c.useRef)(),K=!W("touch");Object(c.useEffect)((function(){q.current=R}),[R]);var J=function(e){var t=C.current;t&&z(t,"translate3d(0px,".concat(e,"px,0)"))},U=function(e){var t=e.y,n=e.animated,c=void 0===n||n,r=x.current;if(r){var a="100%"===t?r.scrollHeight-r.offsetHeight:t;c?Ee({el:r,to:a,x:!1}):r.scrollTop=a}},X=Object(c.useCallback)((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).animated;U({y:"100%",animated:void 0===e||e})}),[]),Z=Object(c.useCallback)((function(){N(0),E("pending"),J(0)}),[]),$=Object(c.useCallback)((function(){var e=x.current;if(e){E("loading");try{var t=e.scrollHeight;h().then((function(n){var c=function(){U({y:e.scrollHeight-t-50,animated:!1})};clearTimeout(Q.current),clearTimeout(G.current),c(),Q.current=setTimeout(c,150),G.current=setTimeout(c,250),Z(),n&&n.noMore&&P(!0)}))}catch(n){console.error(n),Z()}}}),[h,Z]),ee=function(e){V.current.startY=e.touches[0].clientY,V.current.canPull=x.current&&x.current.scrollTop<=0,V.current.canPull&&(E("pull"),_(!1))},te=Object(c.useCallback)((function(e){var t=e.touches[0].clientY,n=V.current,c=n.canPull,r=n.startY;if(c&&!(t<r)&&"loading"!==q.current){var o=(t-r)/j;u&&o>u&&(o=u),o>0&&(e.cancelable&&e.preventDefault(),e.stopPropagation(),J(o),N(o),E(o>=a?"active":"pull"))}}),[j,u,a]),ne=Object(c.useCallback)((function(){_(!0),"active"===q.current?$():Z()}),[$,Z]);return Object(c.useEffect)((function(){var e=x.current;e&&!K&&(F?(e.removeEventListener("touchstart",ee),e.removeEventListener("touchmove",te),e.removeEventListener("touchend",ne),e.removeEventListener("touchcancel",ne)):(e.addEventListener("touchstart",ee,He),e.addEventListener("touchmove",te,Le),e.addEventListener("touchend",ne),e.addEventListener("touchcancel",ne)))}),[F,ne,te,K]),Object(c.useEffect)((function(){"loading"!==R||K||J(l)}),[l,R,K]),Object(c.useImperativeHandle)(t,(function(){return{scrollTo:U,scrollToEnd:X,wrapperRef:x}}),[X]),Object(d.jsx)("div",{className:"PullToRefresh",ref:x,onScroll:O,children:Object(d.jsx)("div",{className:"PullToRefresh-inner",children:Object(d.jsxs)("div",{className:Object(s.a)("PullToRefresh-content",{"PullToRefresh-transition":I}),ref:C,children:[Object(d.jsx)("div",{className:"PullToRefresh-indicator",children:g(R,y)}),!F&&K&&Object(d.jsxs)(D,{className:"PullToRefresh-fallback",center:!0,children:[g(R,a),Object(d.jsx)(B,{className:"PullToRefresh-loadMore",variant:"text",onClick:$,children:m})]}),r.a.Children.only(v)]})})})})),Be={threshold:[0,.1]},_e=function(e){var t=e.item,n=e.effect,r=e.children,a=e.onIntersect,o=Object(c.useRef)(null);return Object(c.useEffect)((function(){if(a){var e=new IntersectionObserver((function(n){var c=Object(i.a)(n,1)[0];c.intersectionRatio>0&&(a(t,c)||e.unobserve(c.target))}),Be);return o.current&&e.observe(o.current),function(){e.disconnect()}}}),[t,a]),Object(d.jsx)("div",{className:Object(s.a)("ScrollView-item",{"slide-in-right-item":"slide"===n,"A-fadeIn":"fade"===n}),ref:o,children:r})},Ye=["className","fullWidth","scrollX","effect","data","itemKey","renderItem","onIntersect","onScroll","children"],Ae=!W("touch"),Fe=r.a.forwardRef((function(e,t){var n=e.className,r=e.fullWidth,a=e.scrollX,o=void 0===a||a,i=e.effect,l=void 0===i?"slide":i,u=e.data,b=e.itemKey,j=e.renderItem,m=e.onIntersect,v=e.onScroll,O=e.children,h=Object(g.a)(e,Ye),p=Object(c.useRef)(null);var x=Object(c.useCallback)((function(e,t){var n;return b&&(n="function"===typeof b?b(e,t):e[b]),n||t}),[b]);return Object(c.useImperativeHandle)(t,(function(){return{scrollTo:function(e){var t=e.x,n=e.y;null!=t&&(p.current.scrollLeft=t),null!=n&&(p.current.scrollTop=n)}}})),Object(d.jsxs)("div",Object(f.a)(Object(f.a)({className:Object(s.a)("ScrollView",{"ScrollView--fullWidth":r,"ScrollView--x":o,"ScrollView--hasControls":Ae},n),ref:t},h),{},{children:[Ae&&Object(d.jsx)(X,{className:"ScrollView-control",icon:"chevron-left","aria-label":"Previous",onClick:function(){var e=p.current;e.scrollLeft-=e.offsetWidth}}),Object(d.jsx)("div",{className:"ScrollView-scroller",ref:p,onScroll:v,children:Object(d.jsxs)("div",{className:"ScrollView-inner",children:[u.map((function(e,t){return Object(d.jsx)(_e,{item:e,effect:e.effect||l,onIntersect:m,children:j(e,t)},x(e,t))})),O?Object(d.jsx)(_e,{item:{},effect:l,onIntersect:m,children:O}):null]})}),Ae&&Object(d.jsx)(X,{className:"ScrollView-control",icon:"chevron-right","aria-label":"Next",onClick:function(){var e=p.current;e.scrollLeft+=e.offsetWidth}})]}))})),Pe=function(e){var t=e.item,n=e.index,c=e.onClick;return Object(d.jsx)("button",{className:Object(s.a)("QuickReply",{new:t.isNew,highlight:t.isHighlight}),type:"button","data-code":t.code,"aria-label":"\u5feb\u6377\u77ed\u8bed: ".concat(t.name,"\uff0c\u53cc\u51fb\u53d1\u9001"),onClick:function(){c(t,n)},children:Object(d.jsxs)("div",{className:"QuickReply-inner",children:[t.icon&&Object(d.jsx)(H,{type:t.icon}),t.img&&Object(d.jsx)("img",{className:"QuickReply-img",src:t.img,alt:""}),Object(d.jsx)("span",{children:t.name})]})})},De=function(e){var t=e.items,n=e.visible,r=e.onClick,a=e.onScroll,o=Object(c.useRef)(null),s=Object(c.useState)(!!a),l=Object(i.a)(s,2),u=l[0],b=l[1];return Object(c.useLayoutEffect)((function(){var e;return o.current&&(b(!1),o.current.scrollTo({x:0,y:0}),e=setTimeout((function(){b(!0)}),500)),function(){clearTimeout(e)}}),[t]),t.length?Object(d.jsx)(Fe,{className:"QuickReplies",data:t,itemKey:"name",ref:o,"data-visible":n,onScroll:u?a:void 0,renderItem:function(e,t){return Object(d.jsx)(Pe,{item:e,index:t,onClick:r},e.name)}}):null};De.defaultProps={items:[],visible:!0};var ze=r.a.memo(De);u.a.addHook("beforeSanitizeAttributes",(function(e){if(e instanceof HTMLElement&&e.hasAttribute("href")){var t=e.getAttribute("href");t&&(e.dataset.cuiHref=t),"_blank"===e.getAttribute("target")&&(e.dataset.cuiTarget="1")}})),u.a.addHook("afterSanitizeAttributes",(function(e){e instanceof HTMLElement&&(e.dataset.cuiHref&&e.hasAttribute("href")&&e.removeAttribute("data-cui-href"),e.dataset.cuiTarget&&(e.setAttribute("target","_blank"),e.setAttribute("rel","noopener noreferrer"),e.removeAttribute("data-cui-target")))}));var Ve=function(e){var t=e.item,n=e.onClick,c=t.type,r=t.icon,a=t.img,o=t.title;return Object(d.jsx)("div",{className:"Toolbar-item","data-type":c,children:Object(d.jsxs)(B,{className:"Toolbar-btn",onClick:function(e){return n(t,e)},children:[Object(d.jsxs)("span",{className:"Toolbar-btnIcon",children:[r&&Object(d.jsx)(H,{type:r}),a&&Object(d.jsx)("img",{className:"Toolbar-img",src:a,alt:""})]}),Object(d.jsx)("span",{className:"Toolbar-btnText",children:o})]})})},We=function(e){var t=e.items,n=e.onClick;return Object(d.jsx)("div",{className:"Toolbar",children:t.map((function(e){return Object(d.jsx)(Ve,{item:e,onClick:n},e.type)}))})},qe=function(e){var t=e.count,n=e.onClick,r=e.onDidMount,a=se("BackBottom").trans,o=a("bottom");return t&&(o=a(1===t?"newMsgOne":"newMsgOther").replace("{n}",t)),Object(c.useEffect)((function(){r&&r()}),[r]),Object(d.jsx)("div",{className:"BackBottom",children:Object(d.jsxs)(B,{className:"slide-in-right-item",onClick:n,children:[o,Object(d.jsx)(H,{type:"chevron-double-down"})]})})};var Qe=!!W("passiveListener")&&{passive:!0};function Ge(e,t){var n=Math.max(e.offsetHeight,600);return Z(e)<n*t}var Ke=r.a.forwardRef((function(e,t){var n=e.messages,r=e.loadMoreText,a=e.onRefresh,o=e.onScroll,s=e.renderBeforeMessageList,l=e.renderMessageContent,u=e.onBackBottomShow,b=e.onBackBottomClick,j=Object(c.useState)(!1),m=Object(i.a)(j,2),v=m[0],O=m[1],h=Object(c.useState)(0),p=Object(i.a)(h,2),g=p[0],x=p[1],C=Object(c.useRef)(v),k=Object(c.useRef)(g),w=Object(c.useRef)(null),y=Object(c.useRef)(null),N=n[n.length-1],T=function(){x(0),O(!1)},S=Object(c.useCallback)((function(e){y.current&&(!C.current||e&&e.force)&&(y.current.scrollToEnd(e),C.current&&T())}),[]),R=Object(c.useRef)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,n=!0;return function(){n&&(n=!1,e.apply(void 0,arguments),setTimeout((function(){n=!0}),t))}}((function(e){Ge(e,3)?k.current?Ge(e,.5)&&T():O(!1):O(!0)})));return Object(c.useEffect)((function(){k.current=g}),[g]),Object(c.useEffect)((function(){C.current=v}),[v]),Object(c.useEffect)((function(){var e=y.current,t=e&&e.wrapperRef.current;if(t&&N&&"pop"!==N.position)if("right"===N.position)S({force:!0});else if(Ge(t,2)){var n=!!t.scrollTop;S({animated:n,force:!0})}else x((function(e){return e+1})),O(!0)}),[N,S]),Object(c.useEffect)((function(){var e=w.current,t=!1,n=0;function c(){t=!1,n=0}function r(e){var c=document.activeElement;c&&"TEXTAREA"===c.nodeName&&(t=!0,n=e.touches[0].clientY)}function a(e){t&&Math.abs(e.touches[0].clientY-n)>20&&(document.activeElement.blur(),c())}return e.addEventListener("touchstart",r,Qe),e.addEventListener("touchmove",a,Qe),e.addEventListener("touchend",c),e.addEventListener("touchcancel",c),function(){e.removeEventListener("touchstart",r),e.removeEventListener("touchmove",a),e.removeEventListener("touchend",c),e.removeEventListener("touchcancel",c)}}),[]),Object(c.useImperativeHandle)(t,(function(){return{ref:w,scrollToEnd:S}}),[S]),Object(d.jsxs)("div",{className:"MessageContainer",ref:w,tabIndex:-1,children:[s&&s(),Object(d.jsx)(Ie,{onRefresh:a,onScroll:function(e){R.current(e.target),o&&o(e)},loadMoreText:r,ref:y,children:Object(d.jsx)("div",{className:"MessageList",children:n.map((function(e){return Object(c.createElement)(ge,Object(f.a)(Object(f.a)({},e),{},{renderMessageContent:l,key:e._id}))}))})}),v&&Object(d.jsx)(qe,{count:g,onClick:function(){S({animated:!1,force:!0}),b&&b()},onDidMount:u})]})})),Je=W("passiveListener"),Ue=!!Je&&{passive:!0},Xe=!!Je&&{passive:!1},Ze={inited:"hold2talk",recording:"release2send",willCancel:"release2send"},$e=0,et=0,tt=r.a.forwardRef((function(e,t){var n=e.volume,r=e.onStart,a=e.onEnd,o=e.onCancel,l=Object(c.useState)("inited"),u=Object(i.a)(l,2),b=u[0],j=u[1],f=Object(c.useRef)(null),m=se("Recorder").trans,v=Object(c.useCallback)((function(){var e=Date.now()-$e;a&&a({duration:e})}),[a]);Object(c.useImperativeHandle)(t,(function(){return{stop:function(){j("inited"),v(),$e=0}}})),Object(c.useEffect)((function(){var e=f.current;function t(e){e.cancelable&&e.preventDefault();var t=e.touches[0];et=t.pageY,$e=Date.now(),j("recording"),r&&r()}function n(e){if($e){var t=e.touches[0].pageY;j(et-t>80?"willCancel":"recording")}}function c(e){if($e){var t=e.changedTouches[0].pageY,n=et-t<80;j("inited"),n?v():o&&o()}}return e.addEventListener("touchstart",t,Xe),e.addEventListener("touchmove",n,Ue),e.addEventListener("touchend",c),e.addEventListener("touchcancel",c),function(){e.removeEventListener("touchstart",t),e.removeEventListener("touchmove",n),e.removeEventListener("touchend",c),e.removeEventListener("touchcancel",c)}}),[v,o,r]);var O="willCancel"===b,h={transform:"scale(".concat((n||1)/100+1,")")};return Object(d.jsxs)("div",{className:Object(s.a)("Recorder",{"Recorder--cancel":O}),ref:f,children:["inited"!==b&&Object(d.jsxs)(D,{className:"RecorderToast",direction:"column",center:!0,children:[Object(d.jsxs)("div",{className:"RecorderToast-waves",hidden:"recording"!==b,style:h,children:[Object(d.jsx)(H,{className:"RecorderToast-wave-1",type:"hexagon"}),Object(d.jsx)(H,{className:"RecorderToast-wave-2",type:"hexagon"}),Object(d.jsx)(H,{className:"RecorderToast-wave-3",type:"hexagon"})]}),Object(d.jsx)(H,{className:"RecorderToast-icon",type:O?"cancel":"mic"}),Object(d.jsx)("span",{children:m(O?"release2cancel":"releaseOrSwipe")})]}),Object(d.jsx)("div",{className:"Recorder-btn",role:"button","aria-label":m("hold2talk"),children:Object(d.jsx)("span",{children:m(Ze[b])})})]})})),nt=function(e){var t=e.onClickOutside,n=e.children;return Object(d.jsx)(K,{onClick:t,children:n})};var ct=function(e){var t=e.className,n=e.active,r=e.target,o=e.children,l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"click",n=Object(c.useRef)();return Object(c.useEffect)((function(){var c=function(t){var c=n.current;c&&!c.contains(t.target)&&e&&e(t)};return document.addEventListener(t,c),function(){document.removeEventListener(t,c)}}),[t,e]),n}(e.onClose,"mousedown"),u=p({active:n,ref:l}),b=u.didMount,j=u.isShow,f=Object(c.useState)({}),m=Object(i.a)(f,2),v=m[0],O=m[1],h=Object(c.useCallback)((function(){if(l.current){var e=r.getBoundingClientRect(),t=l.current.getBoundingClientRect();O({top:"".concat(e.top-t.height,"px"),left:"".concat(e.left,"px")})}}),[r,l]);return Object(c.useEffect)((function(){l.current&&(l.current.focus(),h())}),[b,h,l]),function(e){var t=Object(c.useRef)(!1);Object(c.useEffect)((function(){function n(){e(),t.current=!1}function c(){t.current||(t.current=!0,window.requestAnimationFrame?window.requestAnimationFrame(n):setTimeout(n,66))}return window.addEventListener("resize",c),function(){window.removeEventListener("resize",c)}}),[e])}(h),b?Object(a.createPortal)(Object(d.jsxs)("div",{className:Object(s.a)("Popover",t,{active:j}),ref:l,style:v,children:[Object(d.jsx)("div",{className:"Popover-body",children:o}),Object(d.jsx)("svg",{className:"Popover-arrow",viewBox:"0 0 9 5",children:Object(d.jsx)("polygon",{points:"0,0 5,5, 9,0"})})]}),document.body):null},rt=function(e){return Object(d.jsx)("div",{className:"Composer-actions","data-action-icon":e.icon,children:Object(d.jsx)(X,Object(f.a)({size:"lg"},e))})},at=function(e){var t=e.item,n=e.onClick;return Object(d.jsx)(rt,{icon:t.icon,img:t.img,"data-icon":t.icon,"data-tooltip":t.title||null,"aria-label":t.title,onClick:n})},ot=function(e){var t=e.file,n=e.onCancel,r=e.onSend,a=Object(c.useState)(""),o=Object(i.a)(a,2),s=o[0],l=o[1],u=se("SendConfirm").trans;return Object(c.useEffect)((function(){var e=new FileReader;e.onload=function(e){e.target&&l(e.target.result)},e.readAsDataURL(t)}),[t]),Object(d.jsx)(Te,{className:"SendConfirm",title:u("title"),active:!!s,vertical:!1,actions:[{label:u("cancel"),onClick:n},{label:u("send"),color:"primary",onClick:r}],children:Object(d.jsx)(D,{className:"SendConfirm-inner",center:!0,children:Object(d.jsx)("img",{src:s,alt:""})})})},it=navigator.userAgent,st=/iPad|iPhone|iPod/.test(it);function lt(){return st?(e="Safari/",-1!==it.indexOf(e)||/OS 11_[0-3]\D/.test(it)?0:1):2;var e}var ut=["inputRef","invisible","onImageSend"],dt=W("touch"),bt=function(e){var t=e.inputRef,n=e.invisible,r=e.onImageSend,a=Object(g.a)(e,ut),o=Object(c.useState)(null),l=Object(i.a)(o,2),u=l[0],b=l[1],j=Object(c.useRef)(null),m=Object(c.useCallback)((function(e){!function(e,t){var n=e.clipboardData.items;if(n&&n.length)for(var c=0;c<n.length;c++){var r=n[c];if(-1!==r.type.indexOf("image")){var a=r.getAsFile();a&&t(a),e.preventDefault();break}}}(e,b)}),[]),v=Object(c.useCallback)((function(){b(null)}),[]),O=Object(c.useCallback)((function(){r&&u&&Promise.resolve(r(u)).then((function(){b(null)}))}),[r,u]);return Object(c.useEffect)((function(){dt&&t.current&&j.current&&function(e,t){var n,c=lt();t||(t=e);var r=function(){0!==c&&(1===c?document.body.scrollTop=document.body.scrollHeight:t.scrollIntoView(!1))};e.addEventListener("focus",(function(){setTimeout(r,300),n=setTimeout(r,1e3)})),e.addEventListener("blur",(function(){clearTimeout(n),c&&st&&setTimeout((function(){document.body.scrollIntoView()}))}))}(t.current,j.current)}),[t]),Object(d.jsxs)("div",{className:Object(s.a)({"S--invisible":n}),ref:j,children:[Object(d.jsx)(te,Object(f.a)({className:"Composer-input",rows:1,autoSize:!0,enterKeyHint:"send",onPaste:r?m:void 0,ref:t},a)),u&&Object(d.jsx)(ot,{file:u,onCancel:v,onSend:O})]})},jt=function(e){var t=e.disabled,n=e.onClick,c=se("Composer").trans;return Object(d.jsx)("div",{className:"Composer-actions",children:Object(d.jsx)(B,{className:"Composer-sendBtn",disabled:t,onMouseDown:n,color:"primary",children:c("send")})})},ft="S--focusing",mt=r.a.forwardRef((function(e,t){var n=e.text,r=void 0===n?"":n,a=e.inputType,o=void 0===a?"text":a,l=e.wideBreakpoint,u=e.placeholder,b=void 0===u?"\u8bf7\u8f93\u5165...":u,j=e.recorder,m=void 0===j?{}:j,v=e.onInputTypeChange,O=e.onFocus,h=e.onBlur,p=e.onChange,g=e.onSend,x=e.onImageSend,C=e.onAccessoryToggle,k=e.toolbar,w=void 0===k?[]:k,y=e.onToolbarClick,N=e.rightAction,T=e.inputOptions,S=Object(c.useState)(r),R=Object(i.a)(S,2),E=R[0],M=R[1],H=Object(c.useState)(o||"text"),L=Object(i.a)(H,2),I=L[0],B=L[1],_=Object(c.useState)(!1),Y=Object(i.a)(_,2),A=Y[0],F=Y[1],P=Object(c.useState)(""),D=Object(i.a)(P,2),z=D[0],V=D[1],W=Object(c.useRef)(null),q=Object(c.useRef)(!1),Q=Object(c.useRef)(),G=Object(c.useRef)(),K=Object(c.useRef)(!1),J=Object(c.useState)(!1),U=Object(i.a)(J,2),X=U[0],Z=U[1];Object(c.useEffect)((function(){var e=!(!l||!window.matchMedia)&&window.matchMedia("(min-width: ".concat(l,")"));function t(e){Z(e.matches)}return Z(e&&e.matches),e&&e.addListener(t),function(){e&&e.removeListener(t)}}),[l]),Object(c.useEffect)((function(){we("S--wide",X),X||V("")}),[X]),Object(c.useEffect)((function(){K.current&&C&&C(A)}),[A,C]),Object(c.useEffect)((function(){K.current=!0}),[]),Object(c.useImperativeHandle)(t,(function(){return{setText:M}}));var $=Object(c.useCallback)((function(){var e="voice"===I,t=e?"text":"voice";if(B(t),e){var n=W.current;n.focus(),n.selectionStart=n.selectionEnd=n.value.length}v&&v(t)}),[I,v]),ee=Object(c.useCallback)((function(e){clearTimeout(Q.current),we(ft,!0),q.current=!0,O&&O(e)}),[O]),te=Object(c.useCallback)((function(e){Q.current=setTimeout((function(){we(ft,!1),q.current=!1}),0),h&&h(e)}),[h]),ne=Object(c.useCallback)((function(){g("text",E),M(""),q.current&&W.current.focus()}),[g,E]),ce=Object(c.useCallback)((function(e){e.shiftKey||13!==e.keyCode||(ne(),e.preventDefault())}),[ne]),re=Object(c.useCallback)((function(e,t){M(e),p&&p(e,t)}),[p]),ae=Object(c.useCallback)((function(e){ne(),e.preventDefault()}),[ne]),oe=Object(c.useCallback)((function(){F(!A)}),[A]),ie=Object(c.useCallback)((function(){setTimeout((function(){F(!1),V("")}))}),[]),se=Object(c.useCallback)((function(e,t){y&&y(e,t),e.render&&(G.current=t.currentTarget,V(e.render))}),[y]),le=Object(c.useCallback)((function(){V("")}),[]),ue="text"===I,de=ue?"volume-circle":"keyboard-circle",be=w.length>0,je=Object(f.a)(Object(f.a)({},T),{},{value:E,inputRef:W,placeholder:b,onFocus:ee,onBlur:te,onKeyDown:ce,onChange:re,onImageSend:x});return X?Object(d.jsxs)("div",{className:"Composer Composer--lg",children:[be&&w.map((function(e){return Object(d.jsx)(at,{item:e,onClick:function(t){return se(e,t)}},e.type)})),z&&Object(d.jsx)(ct,{active:!!z,target:G.current,onClose:le,children:z}),Object(d.jsx)("div",{className:"Composer-inputWrap",children:Object(d.jsx)(bt,Object(f.a)({invisible:!1},je))}),Object(d.jsx)(jt,{onClick:ae,disabled:!E})]}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"Composer",children:[m.canRecord&&Object(d.jsx)(rt,{className:"Composer-inputTypeBtn","data-icon":de,icon:de,onClick:$,"aria-label":ue?"\u5207\u6362\u5230\u8bed\u97f3\u8f93\u5165":"\u5207\u6362\u5230\u952e\u76d8\u8f93\u5165"}),Object(d.jsxs)("div",{className:"Composer-inputWrap",children:[Object(d.jsx)(bt,Object(f.a)({invisible:!ue},je)),!ue&&Object(d.jsx)(tt,Object(f.a)({},m))]}),!E&&N&&Object(d.jsx)(rt,Object(f.a)({},N)),be&&Object(d.jsx)(rt,{className:Object(s.a)("Composer-toggleBtn",{active:A}),icon:"plus-circle",onClick:oe,"aria-label":A?"\u5173\u95ed\u5de5\u5177\u680f":"\u5c55\u5f00\u5de5\u5177\u680f"}),E&&Object(d.jsx)(jt,{onClick:ae,disabled:!1})]}),A&&Object(d.jsx)(nt,{onClickOutside:ie,children:z||Object(d.jsx)(We,{items:w,onClick:se})})]})})),vt=r.a.forwardRef((function(e,t){var n=e.wideBreakpoint,r=e.locale,a=void 0===r?"zh-CN":r,o=e.locales,i=e.navbar,s=e.renderNavbar,l=e.loadMoreText,u=e.renderBeforeMessageList,b=e.messagesRef,j=e.onRefresh,m=e.onScroll,v=e.messages,O=void 0===v?[]:v,h=e.renderMessageContent,p=e.onBackBottomShow,g=e.onBackBottomClick,x=e.quickReplies,C=void 0===x?[]:x,k=e.quickRepliesVisible,w=e.onQuickReplyClick,y=void 0===w?function(){}:w,N=e.onQuickReplyScroll,T=e.renderQuickReplies,S=e.text,R=e.placeholder,E=e.onInputFocus,M=e.onInputChange,H=e.onInputBlur,L=e.onSend,I=e.onImageSend,B=e.inputOptions,_=e.composerRef,Y=e.inputType,A=e.onInputTypeChange,F=e.recorder,P=e.toolbar,D=e.onToolbarClick,z=e.onAccessoryToggle,V=e.rightAction,W=e.Composer,q=void 0===W?mt:W;return Object(c.useEffect)((function(){/^((?!chrome|android|crios|fxios).)*safari/i.test(navigator.userAgent)&&(document.documentElement.dataset.safari="")}),[]),Object(d.jsx)(ie,{locale:a,locales:o,children:Object(d.jsxs)("div",{className:"ChatApp",ref:t,children:[s?s():i&&Object(d.jsx)(Se,Object(f.a)({},i)),Object(d.jsx)(Ke,{ref:b,loadMoreText:l,messages:O,renderBeforeMessageList:u,renderMessageContent:h,onRefresh:j,onScroll:m,onBackBottomShow:p,onBackBottomClick:g}),Object(d.jsxs)("div",{className:"ChatFooter",children:[T?T():Object(d.jsx)(ze,{items:C,visible:k,onClick:y,onScroll:N}),Object(d.jsx)(q,{wideBreakpoint:n,ref:_,inputType:Y,text:S,inputOptions:B,placeholder:R,onAccessoryToggle:z,recorder:F,toolbar:P,onToolbarClick:D,onInputTypeChange:A,onFocus:function(e){b&&b.current&&b.current.scrollToEnd({animated:!1,force:!0}),E&&E(e)},onChange:M,onBlur:H,onSend:L,onImageSend:I,rightAction:V})]})]})})})),Ot=n(55);function ht(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=Object(c.useMemo)((function(){return e.map((function(e){return O(e)}))}),[e]),n=Object(c.useState)(t),r=Object(i.a)(n,2),a=r[0],o=r[1],s=Object(c.useRef)(!1),l=Object(c.useCallback)((function(e){o((function(t){return[].concat(Object(j.a)(e),Object(j.a)(t))}))}),[]),u=Object(c.useCallback)((function(e,t){o((function(n){return n.map((function(n){return n._id===e?O(t,e):n}))}))}),[]),d=Object(c.useCallback)((function(e){var t=O(e);s.current?(s.current=!1,u(h,t)):o((function(e){return[].concat(Object(j.a)(e),[t])}))}),[u]),b=Object(c.useCallback)((function(e){o((function(t){return t.filter((function(t){return t._id!==e}))}))}),[]),f=Object(c.useCallback)((function(){o(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])}),[]),m=Object(c.useCallback)((function(e){e!==s.current&&(e?d({_id:h,type:"typing"}):b(h),s.current=e)}),[d,b]);return{messages:a,prependMsgs:l,appendMsg:d,updateMsg:u,deleteMsg:b,resetList:f,setTyping:m}}([]),t=e.messages,r=e.appendMsg,a=e.setTyping,o=n(26).default,s=Object(Ot.a)(["userId"]),l=Object(i.a)(s,3),u=l[0],b=l[1],f=(l[2],n(39));function m(){if(u.userId)return u.userId;var e=f.generate();return b("userId",e),e}return Object(d.jsx)(vt,{id:"left",width:"50%",navbar:{title:"\u667a\u80fd\u52a9\u7406\uff1a\u5199\u4f5c\u3001\u7ffb\u8bd1\u3001\u5199\u4ee3\u7801\u3001\u9605\u8bfb\u7406\u89e3\u3001\u6587\u6863\u6458\u8981\u3001\u53e3\u8bed\u4e66\u9762\u5316\u3001\u767e\u79d1\u95ee\u7b54"},messages:t,renderMessageContent:function(e){var t=e.content;return Object(d.jsx)(E,{content:t.text})},onSend:function(e,t){"text"===e&&t.trim()&&(r({type:"text",content:{text:t},position:"right",user:{avatar:"static/user-80.png"},src:"user"}),setTimeout((function(){a(!0),o.post("http://35.153.232.28:5000/v1/chat/completions",{msg:t,userId:m()}).then((function(e){console.log("\u8bf7\u6c42\u6210\u529f"),console.log(e),r({type:"text",content:{text:e.data.choices[0].message.content},user:{avatar:"static/ChatGPT_logo.png"},src:"chatGPT"})})).catch((function(e){r({type:"text",content:{text:e.toString()},user:{avatar:"static/ChatGPT_logo.png"},src:"chatGPT"}),console.log(e)}))}),10))}})}n(51);var pt=document.getElementById("root");o.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(ht,{})}),pt)}},[[52,1,2]]]);
//# sourceMappingURL=main.23b96ff5.chunk.js.map