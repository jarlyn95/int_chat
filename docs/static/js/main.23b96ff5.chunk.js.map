{"version":3,"sources":["chatui/hooks/useForwardRef.ts","chatui/utils/index.ts","chatui/hooks/useMessages.ts","chatui/hooks/useMount.ts","chatui/components/ErrorBoundary/index.tsx","chatui/components/Avatar/index.tsx","chatui/components/Backdrop/index.tsx","chatui/components/Bubble/index.tsx","chatui/components/Icon/index.tsx","chatui/components/Button/index.tsx","chatui/components/Flex/Flex.tsx","chatui/utils/style.ts","chatui/utils/canUse.ts","chatui/components/Carousel/index.tsx","chatui/components/ClickOutside/index.tsx","chatui/components/Form/Form.tsx","chatui/components/IconButton/index.tsx","chatui/utils/getToBottom.ts","chatui/components/Input/index.tsx","chatui/components/LocaleProvider/locales/ar_EG.ts","chatui/components/LocaleProvider/locales/en_US.ts","chatui/components/LocaleProvider/locales/index.ts","chatui/components/LocaleProvider/locales/fr_FR.ts","chatui/components/LocaleProvider/locales/zh_CN.ts","chatui/components/LocaleProvider/index.tsx","chatui/components/Message/SystemMessage.tsx","chatui/components/Time/parser.ts","chatui/components/Time/Time.tsx","chatui/components/Typing/Typing.tsx","chatui/components/Message/Message.tsx","chatui/hooks/useNextId.ts","chatui/utils/toggleClass.ts","chatui/components/Modal/Base.tsx","chatui/components/Modal/Modal.tsx","chatui/components/Navbar/index.tsx","chatui/components/Price/index.tsx","chatui/components/Portal/index.ts","chatui/utils/smoothScroll.ts","chatui/components/PullToRefresh/index.tsx","chatui/components/ScrollView/Item.tsx","chatui/components/ScrollView/ScrollView.tsx","chatui/components/QuickReplies/QuickReply.tsx","chatui/components/QuickReplies/QuickReplies.tsx","chatui/components/RichText/configDOMPurify.ts","chatui/components/Toast/index.tsx","chatui/components/Toolbar/ToolbarButton.tsx","chatui/components/Toolbar/Toolbar.tsx","chatui/components/BackBottom/index.tsx","chatui/components/MessageContainer/index.tsx","chatui/utils/throttle.ts","chatui/components/Recorder/index.tsx","chatui/components/Composer/AccessoryWrap.tsx","chatui/components/Popover/index.tsx","chatui/hooks/useClickOutside.ts","chatui/hooks/useWindowResize.ts","chatui/components/Composer/Action.tsx","chatui/components/Composer/ToolbarItem.tsx","chatui/components/SendConfirm/SendConfirm.tsx","chatui/components/Composer/riseInput.ts","chatui/components/Composer/ComposerInput.tsx","chatui/utils/parseDataTransfer.ts","chatui/components/Composer/SendButton.tsx","chatui/components/Composer/index.tsx","chatui/components/Chat/index.tsx","chatui/utils/isSafari.ts","App.js","index.js"],"names":["useForwardRef","ref","targetRef","useRef","useEffect","current","getRandomString","x","Math","floor","random","toString","abs","Date","now","lastTs","makeMsg","msg","id","ts","createdAt","hasTime","_objectSpread","_id","position","TYPING_ID","useMount","_ref","_ref$active","active","_ref$delay","delay","_useState","useState","_useState2","_slicedToArray","isShow","setIsShow","_useState3","_useState4","didMount","setDidMount","timeout","clearTimeout","setTimeout","offsetHeight","React","Component","Avatar","props","className","src","alt","url","_props$size","size","_props$shape","shape","children","Element","_jsx","clsx","concat","href","Backdrop","onClick","rest","_objectWithoutProperties","_excluded","role","tabIndex","Bubble","_props$type","type","content","other","_jsxs","Icon","spin","name","ariaProps","xlinkHref","composeClass","Button","label","color","variant","oSize","oIcon","icon","loading","block","disabled","e","mapDirection","row","column","mapWrap","nowrap","wrap","mapJustify","center","mapAlign","Flex","forwardRef","_props$as","as","inline","direction","justifyContent","_props$justify","justify","alignItems","_props$align","align","setTransform","el","value","style","transform","webkitTransform","testCache","passiveListener","supportsPassive","opts","Object","defineProperty","get","window","addEventListener","smoothScroll","document","documentElement","touch","canUse","doc","html","ClickOutside","_props$mouseEvent","mouseEvent","others","wrapper","handleClick","contains","target","removeEventListener","ThemeContext","createContext","IconButton","img","getToBottom","scrollHeight","scrollTop","getCount","maxLength","length","Input","oVariant","placeholder","_props$rows","rows","oRows","_props$minRows","minRows","_props$maxRows","maxRows","_props$showCount","showCount","multiline","autoSize","onChange","initialRows","setRows","lineHeight","setLineHeight","inputRef","theme","useContext","lhStr","getComputedStyle","lh","Number","replace","updateRow","useCallback","prevRows","currentRows","handleChange","valueFromEvent","val","substr","input","BackBottom","newMsgOne","newMsgOther","bottom","Time","weekdays","split","formats","LT","lll","WT","YT","Composer","send","SendConfirm","title","cancel","RateActions","up","down","Recorder","hold2talk","release2send","releaseOrSwipe","release2cancel","Search","search","arEG","enUS","LocaleContext","undefined","DEFAULT_LOCALE","LocaleProvider","locale","locales","Provider","defaultProps","useLocale","comp","fallback","localeContext","_ref2","defaultStrings","defaultLocales","strings","trans","key","SystemMessage","action","text","REGEX_FORMAT","MS_A_DAY","parseDate","date","padStart","n","getFormat","diff","setHours","getTime","formatDate","$d","format","dates","YYYY","getFullYear","M","getMonth","D","getDate","dddd","getDay","HH","getHours","mm","getMinutes","match","dateTime","toJSON","Typing","Message","_props$renderMessageC","renderMessageContent","_msg$user","user","_msg$position","_msg$hasTime","avatar","isRL","memo","nextId","getNextId","useNextId","prefix","arguments","flag","body","classList","clearModal","querySelector","toggleClass","Base","baseClass","_props$showClose","showClose","_props$autoFocus","autoFocus","_props$backdrop","backdrop","height","overflow","actions","_props$vertical","vertical","btnVariant","bgColor","onBackdropClick","onClose","mid","titleId","_useMount","focus","isPopup","createPortal","map","item","_createElement","Modal","Navbar","logo","leftContent","_props$rightContent","rightContent","Intl","NumberFormat","prototype","formatToParts","rAF","requestAnimationFrame","to","_ref$duration","duration","count","attr","from","frames","round","step","animate","canPassive","listenerOpts","passive","listenerOptsWithoutPassive","PullToRefresh","_props$distance","distance","oDistance","_props$loadingDistanc","loadingDistance","maxDistance","_props$distanceRatio","distanceRatio","_props$loadMoreText","loadMoreText","onScroll","onRefresh","_props$renderIndicato","renderIndicator","status","wrapperRef","contentRef","setDistance","setStatus","_useState5","_useState6","dropped","setDropped","_useState7","_useState8","setDisabled","sharedRef","statusRef","timer1","timer2","useFallback","setContentStyle","y","scrollTo","_ref$animated","animated","scroller","offsetTop","scrollToEnd","_ref2$animated","reset","handleLoadMore","sh","then","res","handleOffset","noMore","ex","console","error","touchStart","startY","touches","clientY","canPull","touchMove","currentY","_sharedRef$current","dist","cancelable","preventDefault","stopPropagation","touchEnd","useImperativeHandle","Children","only","observerOptions","threshold","Item","effect","onIntersect","itemRef","observer","IntersectionObserver","entry","intersectionRatio","unobserve","observe","disconnect","hasControls","ScrollView","fullWidth","_props$scrollX","scrollX","_props$effect","data","itemKey","renderItem","scrollerRef","getItemKey","index","scrollLeft","offsetWidth","i","QuickReply","new","isNew","highlight","isHighlight","code","QuickReplies","items","visible","scrollEvent","setScrollEvent","useLayoutEffect","timer","DOMPurify","addHook","node","HTMLElement","hasAttribute","getAttribute","dataset","cuiHref","cuiTarget","removeAttribute","setAttribute","ToolbarButton","Toolbar","onDidMount","isNearBottom","max","MessageContainer","messages","renderBeforeMessageList","onBackBottomShow","onBackBottomClick","showBackBottom","setShowBackBottom","newCount","setNewCount","showBackBottomtRef","newCountRef","messagesRef","lastMessage","clearBackBottom","force","checkShowBottomRef","fn","ready","apply","throttle","c","needBlur","activeElement","nodeName","blur","btnTextMap","inited","recording","willCancel","volume","onStart","onEnd","onCancel","btnRef","doEnd","stop","handleTouchStart","touch0","pageY","handleTouchMove","nowY","handleTouchEnd","endY","changedTouches","isRecording","isCancel","wavesStyle","hidden","AccessoryWrap","onClickOutside","Popover","handler","eventName","listener","targetElement","useClickOutside","setStyle","updatePos","targetRect","getBoundingClientRect","rect","top","left","running","runCallback","resizeThrottler","useWindowResize","viewBox","points","Action","ToolbarItem","file","onSend","setImg","reader","FileReader","onload","result","readAsDataURL","ua","navigator","userAgent","iOS","test","testScrollType","str","indexOf","canTouch","ComposerInput","invisible","onImageSend","pastedImage","setPastedImage","wrapRef","handlePaste","callback","clipboardData","getAsFile","parseDataTransfer","handleImageCancel","handleImageSend","Promise","resolve","scrollTimer","scrollType","scrollIntoView","riseInput","enterKeyHint","onPaste","SendButton","onMouseDown","CLASS_NAME_FOCUSING","_props$text","initialText","_props$inputType","inputType","initialInputType","wideBreakpoint","_props$placeholder","_props$recorder","recorder","onInputTypeChange","onFocus","onBlur","onAccessoryToggle","_props$toolbar","toolbar","onToolbarClick","rightAction","inputOptions","setText","setInputType","isAccessoryOpen","setAccessoryOpen","accessoryContent","setAccessoryContent","focused","blurTimer","popoverTarget","isMountRef","_useState9","_useState10","isWide","setWide","mq","matchMedia","handleMq","matches","addListener","removeListener","handleInputTypeChange","isVoice","nextType","selectionStart","selectionEnd","handleInputFocus","handleInputBlur","handleInputKeyDown","shiftKey","keyCode","handleTextChange","handleSendBtnClick","handleAccessoryToggle","handleAccessoryBlur","handleToolbarClick","render","currentTarget","handlePopoverClose","isInputText","inputTypeIcon","hasToolbar","inputProps","onKeyDown","_Fragment","canRecord","Chat","_props$locale","navbar","renderNavbar","_props$messages","_props$quickReplies","quickReplies","quickRepliesVisible","_props$onQuickReplyCl","onQuickReplyClick","onQuickReplyScroll","renderQuickReplies","onInputFocus","onInputChange","onInputBlur","composerRef","_props$Composer","DComposer","safari","App","_useMessages","initialState","initialMsgs","useMemo","t","setMessages","isTypingRef","prependMsgs","msgs","prev","_toConsumableArray","updateMsg","appendMsg","newMsg","deleteMsg","filter","resetList","setTyping","typing","useMessages","axios","require","default","_useCookies","useCookies","_useCookies2","cookies","setCookie","short","getTempId","userId","generate","width","trim","post","response","log","choices","message","catch","rootElement","getElementById","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.23b96ff5.chunk.js","sourcesContent":["import { useEffect, useRef, ForwardedRef } from 'react';\n\nexport default function useForwardRef<T>(ref: ForwardedRef<T>) {\n  const targetRef = useRef<T>(null);\n\n  useEffect(() => {\n    if (!ref) return;\n\n    if (typeof ref === 'function') {\n      ref(targetRef.current);\n    } else {\n      // eslint-disable-next-line no-param-reassign\n      ref.current = targetRef.current;\n    }\n  }, [ref]);\n\n  return targetRef;\n}\n","/**\n * Returns a string with at least 64-bits of randomness.\n *\n * Doesn't trust Javascript's random function entirely. Uses a combination of\n * random and current timestamp, and then encodes the string in base-36 to\n * make it shorter.\n *\n * From: https://medium.com/este-js-framework/its-ok-to-use-javascript-generated-guid-in-a-browser-373ca6431cf7\n * Code: https://github.com/google/closure-library/blob/555e0138c83ed54d25a3e1cd82a7e789e88335a7/closure/goog/string/string.js#L1177\n *\n * @return {string} A random string, e.g. sn1s7vb4gcic.\n */\nexport function getRandomString() {\n  const x = 2147483648;\n  return (\n    Math.floor(Math.random() * x).toString(36) +\n    // eslint-disable-next-line no-bitwise\n    Math.abs(Math.floor(Math.random() * x) ^ Date.now()).toString(36)\n  );\n}\n\n// return element offset height to force the reflow\nexport function reflow(el: HTMLElement) {\n  return el.offsetHeight;\n}\n","/* eslint-disable no-underscore-dangle */\nimport { useState, useMemo, useRef, useCallback } from 'react';\nimport { getRandomString } from '../utils';\nimport { MessageProps, MessageId } from '../components/Message';\n\ntype Messages = MessageProps[];\n\ntype MessageWithoutId = Omit<MessageProps, '_id'> & {\n  _id?: MessageId;\n};\n\nconst TIME_GAP = 5 * 60 * 1000;\nlet lastTs = 0;\n\nconst makeMsg = (msg: MessageWithoutId, id?: MessageId) => {\n  const ts = msg.createdAt || Date.now();\n  const hasTime = msg.hasTime || ts - lastTs > TIME_GAP;\n\n  if (hasTime) {\n    lastTs = ts;\n  }\n\n  return {\n    ...msg,\n    _id: msg._id || id || getRandomString(),\n    createdAt: ts,\n    position: msg.position || 'left',\n    hasTime,\n  };\n};\n\nconst TYPING_ID = '_TYPING_';\n\nexport default function useMessages(initialState: MessageWithoutId[] = []) {\n  const initialMsgs: Messages = useMemo(() => initialState.map((t) => makeMsg(t)), [initialState]);\n  const [messages, setMessages] = useState(initialMsgs);\n  const isTypingRef = useRef(false);\n\n  const prependMsgs = useCallback((msgs: Messages) => {\n    setMessages((prev: Messages) => [...msgs, ...prev]);\n  }, []);\n\n  const updateMsg = useCallback((id: MessageId, msg: MessageWithoutId) => {\n    setMessages((prev) => prev.map((t) => (t._id === id ? makeMsg(msg, id) : t)));\n  }, []);\n\n  const appendMsg = useCallback(\n    (msg: MessageWithoutId) => {\n      const newMsg = makeMsg(msg);\n      if (isTypingRef.current) {\n        isTypingRef.current = false;\n        updateMsg(TYPING_ID, newMsg);\n      } else {\n        setMessages((prev) => [...prev, newMsg]);\n      }\n    },\n    [updateMsg],\n  );\n\n  const deleteMsg = useCallback((id: MessageId) => {\n    setMessages((prev) => prev.filter((t) => t._id !== id));\n  }, []);\n\n  const resetList = useCallback((list = []) => {\n    setMessages(list);\n  }, []);\n\n  const setTyping = useCallback(\n    (typing: boolean) => {\n      if (typing === isTypingRef.current) return;\n\n      if (typing) {\n        appendMsg({\n          _id: TYPING_ID,\n          type: 'typing',\n        });\n      } else {\n        deleteMsg(TYPING_ID);\n      }\n      isTypingRef.current = typing;\n    },\n    [appendMsg, deleteMsg],\n  );\n\n  return {\n    messages,\n    prependMsgs,\n    appendMsg,\n    updateMsg,\n    deleteMsg,\n    resetList,\n    setTyping,\n  };\n}\n","import React, { useState, useEffect, useRef } from 'react';\nimport { reflow } from '../utils';\n\ninterface UseMountOptions {\n  active?: boolean;\n  ref: React.RefObject<any>;\n  delay?: number;\n}\n\nfunction useMount({ active = false, ref, delay = 300 }: UseMountOptions) {\n  const [isShow, setIsShow] = useState(false);\n  const [didMount, setDidMount] = useState(false);\n  const timeout = useRef<ReturnType<typeof setTimeout>>();\n\n  useEffect(() => {\n    if (active) {\n      if (timeout.current) {\n        clearTimeout(timeout.current);\n      }\n      setDidMount(active);\n    } else {\n      setIsShow(active);\n      timeout.current = setTimeout(() => {\n        setDidMount(active);\n      }, delay);\n    }\n  }, [active, delay]);\n\n  useEffect(() => {\n    if (ref.current) {\n      reflow(ref.current);\n    }\n    setIsShow(didMount);\n  }, [didMount, ref]);\n\n  return {\n    didMount,\n    isShow,\n  };\n}\n\nexport default useMount;\n","import React from 'react';\n\nexport interface ErrorBoundaryState {\n  error: Error | null;\n  errorInfo: React.ErrorInfo | null;\n}\n\nexport interface FallbackProps {\n  error: Error;\n  errorInfo: React.ErrorInfo;\n  [k: string]: any;\n}\n\nexport type ErrorBoundaryProps = {\n  FallbackComponent?: React.ComponentType<FallbackProps>;\n  onError?: (error: Error, info: React.ErrorInfo) => void;\n  [k: string]: any;\n};\n\nexport class ErrorBoundary extends React.Component<\n  React.PropsWithRef<React.PropsWithChildren<ErrorBoundaryProps>>,\n  ErrorBoundaryState\n> {\n  constructor(props: ErrorBoundaryProps) {\n    super(props);\n    this.state = {\n      error: null,\n      errorInfo: null,\n    };\n  }\n\n  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {\n    const { onError } = this.props;\n    if (onError) {\n      onError(error, errorInfo);\n    }\n    this.setState({ error, errorInfo });\n  }\n\n  render() {\n    const { FallbackComponent, children, ...rest } = this.props;\n    const { error, errorInfo } = this.state;\n\n    if (errorInfo) {\n      if (FallbackComponent) {\n        return <FallbackComponent error={error!} errorInfo={errorInfo} {...rest} />;\n      }\n\n      return null;\n    }\n\n    return children;\n  }\n}\n","import React from 'react';\nimport clsx from 'clsx';\n\nexport type AvatarSize = 'sm' | 'md' | 'lg';\n\nexport type AvatarShape = 'circle' | 'square';\n\nexport interface AvatarProps {\n  className?: string;\n  src?: string;\n  alt?: string;\n  url?: string;\n  size?: AvatarSize;\n  shape?: AvatarShape;\n}\n\nexport const Avatar: React.FC<AvatarProps> = (props) => {\n  const { className, src, alt, url, size = 'md', shape = 'circle', children } = props;\n\n  const Element = url ? 'a' : 'span';\n  return (\n    <Element\n      className={clsx('Avatar', `Avatar--${size}`, `Avatar--${shape}`, className)}\n      href={url}\n    >\n      {src ? <img src={src} alt={alt} /> : children}\n    </Element>\n  );\n};\n","import React from 'react';\nimport clsx from 'clsx';\n\nexport interface BackdropProps {\n  className?: string;\n  active?: boolean;\n  onClick?: React.MouseEventHandler<HTMLDivElement>;\n}\n\nexport const Backdrop = (props: BackdropProps) => {\n  const { className, active, onClick, ...rest } = props;\n  return (\n    <div\n      className={clsx('Backdrop', className, { active })}\n      onClick={onClick}\n      role=\"button\"\n      tabIndex={-1}\n      aria-hidden\n      {...rest}\n    />\n  );\n};\n","import React from 'react';\n\nexport interface BubbleProps extends React.HTMLAttributes<HTMLDivElement> {\n  type?: string;\n  content?: React.ReactNode;\n}\n\nexport const Bubble = (props: BubbleProps) => {\n  const { type = 'text', content, children, ...other } = props;\n  return (\n    <div className={`Bubble ${type}`} data-type={type} {...other}>\n      {content && <p>{content}</p>}\n      {children}\n    </div>\n  );\n};\n","import React from 'react';\r\nimport clsx from 'clsx';\r\n\r\nexport type IconProps = React.SVGProps<SVGSVGElement> & {\r\n  type: string;\r\n  className?: string;\r\n  name?: string;\r\n  spin?: boolean;\r\n};\r\n\r\nexport const Icon: React.FC<IconProps> = (props) => {\r\n  const { type, className, spin, name, ...other } = props;\r\n  const ariaProps = typeof name === 'string' ? { 'aria-label': name } : { 'aria-hidden': true };\r\n\r\n  return (\r\n    <svg className={clsx('Icon', { 'is-spin': spin }, className)} {...ariaProps} {...other}>\r\n      <use xlinkHref={`#icon-${type}`} />\r\n    </svg>\r\n  );\r\n};\r\n","import React from 'react';\nimport clsx from 'clsx';\nimport { Icon } from '../Icon';\n\nexport interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  className?: string;\n  label?: string;\n  color?: 'primary';\n  variant?: 'text' | 'outline';\n  size?: 'sm' | 'md' | 'lg';\n  block?: boolean;\n  icon?: string;\n  loading?: boolean;\n  disabled?: boolean;\n  onClick?: (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\n}\n\nfunction composeClass(type?: string) {\n  return type && `Btn--${type}`;\n}\n\nexport const Button = (props: ButtonProps) => {\n  const {\n    className,\n    label,\n    color,\n    variant,\n    size: oSize,\n    icon: oIcon,\n    loading,\n    block,\n    disabled,\n    children,\n    onClick,\n    ...other\n  } = props;\n\n  const icon = oIcon || (loading && 'spinner');\n  const size = oSize || (block ? 'lg' : '');\n\n  function handleClick(e: React.MouseEvent<HTMLButtonElement, MouseEvent>) {\n    if (!disabled && !loading && onClick) {\n      onClick(e);\n    }\n  }\n\n  return (\n    <button\n      className={clsx(\n        'Btn',\n        composeClass(color),\n        composeClass(variant),\n        composeClass(size),\n        {\n          'Btn--block': block,\n        },\n        className,\n      )}\n      type=\"button\"\n      disabled={disabled}\n      onClick={handleClick}\n      {...other}\n    >\n      {icon && (\n        <span className=\"Btn-icon\">\n          <Icon type={icon} spin={loading} />\n        </span>\n      )}\n      {label || children}\n    </button>\n  );\n};\n","import React from 'react';\nimport clsx from 'clsx';\n\nconst mapDirection = {\n  row: 'Flex--d-r',\n  'row-reverse': 'Flex--d-rr',\n  column: 'Flex--d-c',\n  'column-reverse': 'Flex--d-cr',\n};\n\nconst mapWrap = {\n  nowrap: 'Flex--w-n',\n  wrap: 'Flex--w-w',\n  'wrap-reverse': 'Flex--w-wr',\n};\n\nconst mapJustify = {\n  'flex-start': 'Flex--jc-fs',\n  'flex-end': 'Flex--jc-fe',\n  center: 'Flex--jc-c',\n  'space-between': 'Flex--jc-sb',\n  'space-around': 'Flex--jc-sa',\n};\n\nconst mapAlign = {\n  'flex-start': 'Flex--ai-fs',\n  'flex-end': 'Flex--ai-fe',\n  center: 'Flex--ai-c',\n};\n\nexport type As<T = any> = React.ElementType<T>;\n\nexport interface FlexProps extends React.HTMLAttributes<HTMLElement> {\n  as?: As;\n  className?: string;\n  center?: boolean;\n  inline?: boolean;\n  direction?: 'row' | 'row-reverse' | 'column' | 'column-reverse';\n  wrap?: 'nowrap' | 'wrap' | 'wrap-reverse';\n  justify?: 'flex-start' | 'flex-end' | 'center' | 'space-between' | 'space-around';\n  justifyContent?: FlexProps['justify'];\n  align?: 'flex-start' | 'flex-end' | 'center';\n  alignItems?: FlexProps['align'];\n  children?: React.ReactNode;\n}\n\nexport const Flex = React.forwardRef<HTMLElement, FlexProps>((props, ref) => {\n  const {\n    as: Element = 'div',\n    className,\n    inline,\n    center,\n    direction,\n    wrap,\n    justifyContent,\n    justify = justifyContent,\n    alignItems,\n    align = alignItems,\n    children,\n    ...other\n  } = props;\n\n  return (\n    <Element\n      className={clsx(\n        'Flex',\n        direction && mapDirection[direction],\n        justify && mapJustify[justify],\n        align && mapAlign[align],\n        wrap && mapWrap[wrap],\n        {\n          'Flex--inline': inline,\n          'Flex--center': center,\n        },\n        className,\n      )}\n      ref={ref}\n      {...other}\n    >\n      {children}\n    </Element>\n  );\n});\n","/* eslint-disable no-param-reassign */\nexport const setTransform = (el: HTMLElement, value: string) => {\n  el.style.transform = value;\n  el.style.webkitTransform = value;\n};\n\nexport const setTransition = (el: HTMLElement, value: string) => {\n  el.style.transition = value;\n  el.style.webkitTransition = value;\n};\n","const testCache = {\n  passiveListener: () => {\n    let supportsPassive = false;\n    try {\n      const opts = Object.defineProperty({}, 'passive', {\n        // eslint-disable-next-line\n        get() {\n          supportsPassive = true;\n        },\n      });\n      // @ts-ignore\n      window.addEventListener('test', null, opts);\n    } catch (e) {\n      // No support\n    }\n    return supportsPassive;\n  },\n  smoothScroll: () => 'scrollBehavior' in document.documentElement.style,\n  touch: () => 'ontouchstart' in window,\n};\n\nexport function addTest(name: string, test: Function) {\n  // @ts-ignore\n  testCache[name] = test();\n}\n\nexport default function canUse(name: string) {\n  // @ts-ignore\n  return testCache[name]();\n}\n","import React, { useState, useEffect, useRef, useCallback, useImperativeHandle } from 'react';\nimport clsx from 'clsx';\nimport { CarouselItem } from './Item';\nimport { setTransform, setTransition } from '../../utils/style';\nimport canUse from '../../utils/canUse';\n\nexport interface CarouselProps {\n  children: React.ReactNode;\n  className?: string;\n  startIndex?: number;\n  draggable?: boolean;\n  clickDragThreshold?: number;\n  duration?: number;\n  easing?: string;\n  threshold?: number;\n  loop?: boolean;\n  rtl?: boolean;\n  autoPlay?: boolean;\n  interval?: number;\n  // pauseOnHover?: boolean;\n  dots?: boolean;\n  onChange?: (activeIndex?: number) => void;\n\n  // Deprecated:\n  autoplay?: boolean;\n  autoplaySpeed?: number;\n  indicators?: boolean;\n}\n\nexport interface CarouselHandle {\n  goTo: (n: number) => void;\n  prev: () => void;\n  next: () => void;\n}\n\ninterface State {\n  first: boolean;\n  wrapWidth: number;\n  hover: boolean;\n  startX: number;\n  endX: number;\n  startY: number;\n  canMove: boolean | null;\n  pressDown: boolean;\n}\n\ntype DragEvent = React.TouchEvent<HTMLDivElement> | React.MouseEvent<HTMLDivElement, MouseEvent>;\n\nconst formElements = ['TEXTAREA', 'OPTION', 'INPUT', 'SELECT'];\nconst canTouch = canUse('touch');\n\nexport const Carousel = React.forwardRef<CarouselHandle, CarouselProps>((props, ref) => {\n  const {\n    className,\n    startIndex = 0,\n    draggable = true,\n    duration = 300,\n    easing = 'ease',\n    threshold = 20,\n    clickDragThreshold = 10,\n    loop = true,\n    rtl = false,\n    autoPlay = props.autoplay || false,\n    interval = props.autoplaySpeed || 4000,\n    dots = props.indicators || true,\n    onChange,\n    children,\n  } = props;\n\n  const count = React.Children.count(children);\n  const itemWith = `${100 / count}%`;\n\n  const wrapperRef = useRef<HTMLDivElement>(null!);\n  const innerRef = useRef<HTMLDivElement>(null!);\n  const autoPlayTimerRef = useRef<any>(null);\n\n  const stateRef = useRef<State>({\n    first: true,\n    wrapWidth: 0,\n    hover: false,\n    startX: 0,\n    endX: 0,\n    startY: 0,\n    canMove: null,\n    pressDown: false,\n  });\n\n  const getIndex = useCallback(\n    (idx: number) => (loop ? idx % count : Math.max(0, Math.min(idx, count - 1))),\n    [count, loop],\n  );\n\n  const [activeIndex, setActiveIndex] = useState(getIndex(startIndex));\n  const [isDragging, setDragging] = useState(false);\n\n  const enableTransition = useCallback(() => {\n    setTransition(innerRef.current, `transform ${duration}ms ${easing}`);\n  }, [duration, easing]);\n\n  const disableTransition = () => {\n    setTransition(innerRef.current, 'transform 0s');\n  };\n\n  const moveX = (x: number) => {\n    setTransform(innerRef.current, `translate3d(${x}px, 0, 0)`);\n  };\n\n  const slideTo = useCallback(\n    (idx: number, smooth?: boolean) => {\n      const nextIndex = loop ? idx + 1 : idx;\n      const offset = (rtl ? 1 : -1) * nextIndex * stateRef.current.wrapWidth;\n\n      if (smooth) {\n        requestAnimationFrame(() => {\n          requestAnimationFrame(() => {\n            enableTransition();\n            moveX(offset);\n          });\n        });\n      } else {\n        moveX(offset);\n      }\n    },\n    [enableTransition, loop, rtl],\n  );\n\n  const goTo = useCallback(\n    (idx: number) => {\n      if (count <= 1) {\n        return;\n      }\n\n      const nextIndex = getIndex(idx);\n\n      if (nextIndex !== activeIndex) {\n        setActiveIndex(nextIndex);\n        // slideTo(nextIndex, loop);\n      }\n    },\n    [activeIndex, count, getIndex],\n  );\n\n  const prev = useCallback(() => {\n    if (count <= 1) {\n      return;\n    }\n\n    let nextIndex = activeIndex - 1;\n\n    if (loop) {\n      if (nextIndex < 0) {\n        const state = stateRef.current;\n        const moveTo = count + 1;\n        const offset = (rtl ? 1 : -1) * moveTo * state.wrapWidth;\n        const dragDist = draggable ? state.endX - state.startX : 0;\n\n        disableTransition();\n        moveX(offset + dragDist);\n        nextIndex = count - 1;\n      }\n    } else {\n      nextIndex = Math.max(nextIndex, 0);\n    }\n\n    if (nextIndex !== activeIndex) {\n      setActiveIndex(nextIndex);\n      // slideTo(nextIndex, loop);\n    }\n  }, [activeIndex, count, draggable, loop, rtl]);\n\n  const next = useCallback(() => {\n    if (count <= 1) {\n      return;\n    }\n\n    let nextIndex = activeIndex + 1;\n\n    if (loop) {\n      const isClone = nextIndex > count - 1;\n      if (isClone) {\n        nextIndex = 0;\n        const state = stateRef.current;\n        const dragDist = draggable ? state.endX - state.startX : 0;\n\n        disableTransition();\n        moveX(dragDist);\n      }\n    } else {\n      nextIndex = Math.min(nextIndex, count - 1);\n    }\n\n    if (nextIndex !== activeIndex) {\n      setActiveIndex(nextIndex);\n      // slideTo(nextIndex, loop);\n    }\n  }, [activeIndex, count, draggable, loop]);\n\n  const doAutoPlay = useCallback(() => {\n    if (!autoPlay || stateRef.current.hover) {\n      return;\n    }\n\n    autoPlayTimerRef.current = setTimeout(() => {\n      enableTransition();\n      next();\n    }, interval);\n  }, [autoPlay, interval, enableTransition, next]);\n\n  const clearAutoPlay = () => {\n    clearTimeout(autoPlayTimerRef.current);\n  };\n\n  const resetToCurrent = () => {\n    slideTo(activeIndex, true);\n    doAutoPlay();\n  };\n\n  const updateAfterDrag = () => {\n    const state = stateRef.current;\n    const offset = (rtl ? -1 : 1) * (state.endX - state.startX);\n    const offsetDist = Math.abs(offset);\n    const isClone1 = offset > 0 && activeIndex - 1 < 0;\n    const isClone2 = offset < 0 && activeIndex + 1 > count - 1;\n\n    if (isClone1 || isClone2) {\n      if (loop) {\n        if (isClone1) {\n          prev();\n        } else {\n          next();\n        }\n      } else {\n        resetToCurrent();\n      }\n    } else if (offset > 0 && offsetDist > threshold && count > 1) {\n      prev();\n    } else if (offset < 0 && offsetDist > threshold && count > 1) {\n      next();\n    } else {\n      resetToCurrent();\n    }\n  };\n\n  const resetDrag = () => {\n    const state = stateRef.current;\n\n    state.startX = 0;\n    state.endX = 0;\n    state.startY = 0;\n    state.canMove = null;\n    state.pressDown = false;\n  };\n\n  const dragStart = (e: DragEvent) => {\n    if (formElements.includes((e.target as Element).nodeName)) {\n      return;\n    }\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    const ev = 'touches' in e ? e.touches[0] : e;\n    const state = stateRef.current;\n\n    state.pressDown = true;\n    state.startX = ev.pageX;\n    state.startY = ev.pageY;\n\n    clearAutoPlay();\n  };\n\n  const dragMove = (e: DragEvent) => {\n    e.stopPropagation();\n\n    const ev = 'touches' in e ? e.touches[0] : e;\n    const state = stateRef.current;\n\n    if (state.pressDown) {\n      if ('touches' in e) {\n        if (state.canMove === null) {\n          state.canMove = Math.abs(state.startY - ev.pageY) < Math.abs(state.startX - ev.pageX);\n        }\n        if (!state.canMove) {\n          return;\n        }\n      }\n\n      e.preventDefault();\n      disableTransition();\n\n      state.endX = ev.pageX;\n\n      const nextIndex = loop ? activeIndex + 1 : activeIndex;\n      const nextOffset = nextIndex * state.wrapWidth;\n      const dragOffset = state.endX - state.startX;\n\n      if (!isDragging && Math.abs(dragOffset) > clickDragThreshold) {\n        setDragging(true);\n      }\n\n      // 阻尼\n      // if ((activeIndex === 0 && dragOffset > 0) || (activeIndex === count - 1 && dragOffset < 0)) {\n      //   dragOffset *= 0.35;\n      // }\n\n      const offset = rtl ? nextOffset + dragOffset : dragOffset - nextOffset;\n      moveX(offset);\n    }\n  };\n\n  const dragEnd = (e: DragEvent) => {\n    e.stopPropagation();\n    const state = stateRef.current;\n    state.pressDown = false;\n    setDragging(false);\n    enableTransition();\n    if (state.endX) {\n      updateAfterDrag();\n    } else {\n      // when clicked\n      doAutoPlay();\n    }\n    resetDrag();\n  };\n\n  const onMouseEnter = () => {\n    stateRef.current.hover = true;\n    clearAutoPlay();\n  };\n\n  const onMouseLeave = (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n    const state = stateRef.current;\n    state.hover = false;\n\n    if (state.pressDown) {\n      state.pressDown = false;\n      state.endX = e.pageX;\n\n      enableTransition();\n      updateAfterDrag();\n      resetDrag();\n    }\n\n    doAutoPlay();\n  };\n\n  const handleClickDot = (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n    const { slideTo: i } = e.currentTarget.dataset;\n    if (i) {\n      const idx = parseInt(i, 10);\n      goTo(idx);\n    }\n    e.preventDefault();\n  };\n\n  useImperativeHandle(\n    ref,\n    () => ({\n      goTo,\n      prev,\n      next,\n    }),\n    [goTo, prev, next],\n  );\n\n  useEffect(() => {\n    // should use ResizeObserver\n    function handleResize() {\n      stateRef.current.wrapWidth = wrapperRef.current.offsetWidth;\n      slideTo(activeIndex);\n    }\n\n    if (stateRef.current.first) {\n      handleResize();\n    }\n\n    window.addEventListener('resize', handleResize);\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, [activeIndex, slideTo]);\n\n  useEffect(() => {\n    if (onChange && !stateRef.current.first) {\n      onChange(activeIndex);\n    }\n  }, [activeIndex, onChange]);\n\n  useEffect(() => {\n    if (stateRef.current.first) {\n      slideTo(activeIndex);\n      stateRef.current.first = false;\n    } else {\n      slideTo(activeIndex, true);\n    }\n  }, [activeIndex, slideTo]);\n\n  useEffect(() => {\n    doAutoPlay();\n\n    return () => {\n      clearAutoPlay();\n    };\n  }, [autoPlay, activeIndex, doAutoPlay]);\n\n  let events;\n\n  if (draggable) {\n    events = canTouch\n      ? {\n          onTouchStart: dragStart,\n          onTouchMove: dragMove,\n          onTouchEnd: dragEnd,\n        }\n      : {\n          onMouseDown: dragStart,\n          onMouseMove: dragMove,\n          onMouseUp: dragEnd,\n          onMouseEnter,\n          onMouseLeave,\n        };\n  } else {\n    events = {\n      onMouseEnter,\n      onMouseLeave,\n    };\n  }\n\n  return (\n    <div\n      className={clsx(\n        'Carousel',\n        {\n          'Carousel--draggable': draggable,\n          'Carousel--rtl': rtl,\n          'Carousel--dragging': isDragging,\n        },\n        className,\n      )}\n      ref={wrapperRef}\n      {...events}\n    >\n      <div\n        className=\"Carousel-inner\"\n        style={{ width: `${loop ? count + 2 : count}00%` }}\n        ref={innerRef}\n      >\n        {loop && (\n          <CarouselItem width={itemWith}>\n            {React.Children.toArray(children)[count - 1]}\n          </CarouselItem>\n        )}\n        {React.Children.map(children, (item, i) => (\n          <CarouselItem width={itemWith} key={i}>\n            {item}\n          </CarouselItem>\n        ))}\n        {loop && (\n          <CarouselItem width={itemWith}>{React.Children.toArray(children)[0]}</CarouselItem>\n        )}\n      </div>\n      {dots && (\n        <ol className=\"Carousel-dots\">\n          {React.Children.map(children, (_, i) => (\n            <li key={i}>\n              <button\n                className={clsx('Carousel-dot', { active: activeIndex === i })}\n                type=\"button\"\n                aria-label={`Go to slide ${i + 1}`}\n                data-slide-to={i}\n                onClick={handleClickDot}\n              />\n            </li>\n          ))}\n        </ol>\n      )}\n    </div>\n  );\n});\n","import React, { useEffect, useRef } from 'react';\r\n\r\nconst doc = document;\r\nconst html = doc.documentElement;\r\n\r\nexport type ClickOutsideProps = {\r\n  onClick: (event: React.MouseEvent<HTMLElement>) => void;\r\n  // mouseEvent?: 'click' | 'mousedown' | 'mouseup' | false;\r\n  mouseEvent?: 'click' | 'mousedown' | 'mouseup';\r\n};\r\n\r\nexport const ClickOutside: React.FC<ClickOutsideProps> = (props) => {\r\n  const { children, onClick, mouseEvent = 'mouseup', ...others } = props;\r\n  const wrapper = useRef<HTMLDivElement>(null!);\r\n\r\n  function handleClick(e: any) {\r\n    if (!wrapper.current) return;\r\n\r\n    if (html.contains(e.target) && !wrapper.current.contains(e.target)) {\r\n      onClick(e);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (mouseEvent) {\r\n      doc.addEventListener(mouseEvent, handleClick);\r\n    }\r\n    return () => {\r\n      doc.removeEventListener(mouseEvent, handleClick);\r\n    };\r\n  });\r\n\r\n  return (\r\n    <div ref={wrapper} {...others}>\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react';\nimport clsx from 'clsx';\n\nexport type FormProps = {\n  className?: string;\n  /** @deprecated Use `<Input>`'s `variant` instead */\n  theme?: string;\n};\n\nexport const ThemeContext = React.createContext('');\n\nexport const Form: React.FC<FormProps> = (props) => {\n  const { className, theme = '', children, ...other } = props;\n  return (\n    <ThemeContext.Provider value={theme}>\n      <form className={clsx('Form', { 'is-light': theme === 'light' }, className)} {...other}>\n        {children}\n      </form>\n    </ThemeContext.Provider>\n  );\n};\n","import React from 'react';\r\nimport clsx from 'clsx';\r\nimport { Button, ButtonProps } from '../Button';\r\nimport { Icon } from '../Icon';\r\n\r\nexport interface IconButtonProps extends ButtonProps {\r\n  img?: string;\r\n}\r\n\r\nexport const IconButton: React.FC<IconButtonProps> = (props) => {\r\n  const { className, icon, img, ...other } = props;\r\n  return (\r\n    <Button className={clsx('IconBtn', className)} {...other}>\r\n      {icon && <Icon type={icon} />}\r\n      {!icon && img && <img src={img} alt=\"\" />}\r\n    </Button>\r\n  );\r\n};\r\n","export default function getToBottom(el: HTMLElement) {\n  return el.scrollHeight - el.scrollTop - el.offsetHeight;\n}\n","import React, { useState, useEffect, useContext, useCallback } from 'react';\nimport clsx from 'clsx';\nimport { ThemeContext } from '../Form';\nimport useForwardRef from '../../hooks/useForwardRef';\n\nfunction getCount(value: InputProps['value'], maxLength?: number) {\n  return `${`${value}`.length}${maxLength ? `/${maxLength}` : ''}`;\n}\n\nexport type InputVariant = 'outline' | 'filled' | 'flushed';\n\nexport type InputRef = HTMLInputElement | HTMLTextAreaElement;\n\nexport interface InputProps extends Omit<React.InputHTMLAttributes<InputRef>, 'onChange'> {\n  variant?: InputVariant;\n  rows?: number;\n  minRows?: number;\n  maxRows?: number;\n  maxLength?: number;\n  showCount?: boolean;\n  multiline?: boolean;\n  autoSize?: boolean;\n  onChange?: (value: string, event: React.ChangeEvent<InputRef>) => void;\n}\n\nexport const Input = React.forwardRef<InputRef, InputProps>((props, ref) => {\n  const {\n    className,\n    type = 'text',\n    variant: oVariant,\n    value,\n    placeholder,\n    rows: oRows = 1,\n    minRows = oRows,\n    maxRows = 5,\n    maxLength,\n    showCount = !!maxLength,\n    multiline,\n    autoSize,\n    onChange,\n    ...other\n  } = props;\n\n  let initialRows = oRows;\n  if (initialRows < minRows) {\n    initialRows = minRows;\n  } else if (initialRows > maxRows) {\n    initialRows = maxRows;\n  }\n\n  const [rows, setRows] = useState(initialRows);\n  const [lineHeight, setLineHeight] = useState(21);\n  const inputRef = useForwardRef<any>(ref);\n  const theme = useContext(ThemeContext);\n  const variant = oVariant || (theme === 'light' ? 'flushed' : 'outline');\n  const isMultiline = multiline || autoSize || oRows > 1;\n  const Element = isMultiline ? 'textarea' : 'input';\n\n  useEffect(() => {\n    if (!inputRef.current) return;\n\n    const lhStr = getComputedStyle(inputRef.current, null).lineHeight;\n    const lh = Number(lhStr.replace('px', ''));\n\n    if (lh !== lineHeight) {\n      setLineHeight(lh);\n    }\n  }, [inputRef, lineHeight]);\n\n  const updateRow = useCallback(() => {\n    if (!autoSize || !inputRef.current) return;\n\n    const target = inputRef.current as HTMLTextAreaElement;\n    const prevRows = target.rows;\n    target.rows = minRows;\n\n    if (placeholder) {\n      target.placeholder = '';\n    }\n\n    // eslint-disable-next-line no-bitwise\n    const currentRows = ~~(target.scrollHeight / lineHeight);\n\n    if (currentRows === prevRows) {\n      target.rows = currentRows;\n    }\n\n    if (currentRows >= maxRows) {\n      target.rows = maxRows;\n      target.scrollTop = target.scrollHeight;\n    }\n\n    setRows(currentRows < maxRows ? currentRows : maxRows);\n\n    if (placeholder) {\n      target.placeholder = placeholder;\n    }\n  }, [autoSize, inputRef, lineHeight, maxRows, minRows, placeholder]);\n\n  useEffect(() => {\n    if (value === '') {\n      setRows(initialRows);\n    } else {\n      updateRow();\n    }\n  }, [initialRows, updateRow, value]);\n\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<InputRef>) => {\n      updateRow();\n\n      if (onChange) {\n        const valueFromEvent = e.target.value;\n        const shouldTrim = maxLength && valueFromEvent.length > maxLength;\n        const val = shouldTrim ? valueFromEvent.substr(0, maxLength) : valueFromEvent;\n        onChange(val, e);\n      }\n    },\n    [maxLength, onChange, updateRow],\n  );\n\n  const input = (\n    <Element\n      className={clsx('Input', `Input--${variant}`, className)}\n      type={type}\n      value={value}\n      placeholder={placeholder}\n      maxLength={maxLength}\n      ref={inputRef}\n      rows={rows}\n      onChange={handleChange}\n      {...other}\n    />\n  );\n\n  if (showCount) {\n    return (\n      <div className={clsx('InputWrapper', { 'has-counter': showCount })}>\n        {input}\n        {showCount && <div className=\"Input-counter\">{getCount(value, maxLength)}</div>}\n      </div>\n    );\n  }\n  return input;\n});\n","export default {\n  BackBottom: {\n    newMsgOne: '{n} رسالة جديدة',\n    newMsgOther: '{n} رسالة جديدة',\n    bottom: 'الأسفل',\n  },\n  Time: {\n    weekdays: 'الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت'.split('_'),\n    formats: {\n      LT: 'HH:mm',\n      lll: 'YYYY/M/D HH:mm',\n      WT: 'HH:mm dddd',\n      YT: 'HH:mm أمس',\n    },\n  },\n  Composer: {\n    send: 'إرسال',\n  },\n  SendConfirm: {\n    title: 'إرسال صورة',\n    send: 'أرسل',\n    cancel: 'إلغاء',\n  },\n  RateActions: {\n    up: 'التصويت',\n    down: 'تصويت سلبي',\n  },\n  Recorder: {\n    hold2talk: 'أستمر بالضغط لتتحدث',\n    release2send: 'حرر للإرسال',\n    releaseOrSwipe: 'حرر للإرسال ، اسحب لأعلى للإلغاء',\n    release2cancel: 'حرر للإلغاء',\n  },\n  Search: {\n    search: 'يبحث',\n  },\n};\n","export default {\n  BackBottom: {\n    newMsgOne: '{n} new message',\n    newMsgOther: '{n} new messages',\n    bottom: 'Bottom',\n  },\n  Time: {\n    weekdays: 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),\n    formats: {\n      LT: 'HH:mm',\n      lll: 'M/D/YYYY HH:mm',\n      WT: 'dddd HH:mm',\n      YT: 'Yesterday HH:mm',\n    },\n  },\n  Composer: {\n    send: 'Send',\n  },\n  SendConfirm: {\n    title: 'Send photo',\n    send: 'Send',\n    cancel: 'Cancel',\n  },\n  RateActions: {\n    up: 'Up vote',\n    down: 'Down vote',\n  },\n  Recorder: {\n    hold2talk: 'Hold to Talk',\n    release2send: 'Release to Send',\n    releaseOrSwipe: 'Release to send, swipe up to cancel',\n    release2cancel: 'Release to cancel',\n  },\n  Search: {\n    search: 'Search',\n  },\n};\n","import arEG from './ar_EG';\nimport enUS from './en_US';\nimport frFR from './fr_FR';\nimport zhCN from './zh_CN';\n\nexport default {\n  'ar-EG': arEG, // 阿拉伯\n  'fr-FR': frFR, // 法语\n  'en-US': enUS, // 英语（美式）\n  'zh-CN': zhCN, // 简体中文\n};\n","export default {\n  BackBottom: {\n    newMsgOne: '{n} nouveau message',\n    newMsgOther: '{n} nouveau messages',\n    bottom: 'Fond',\n  },\n  Time: {\n    weekdays: 'Dimanche_Lundi_Mardi_Mercredi_Jeudi_Vendredi_Samedi'.split('_'),\n    formats: {\n      LT: 'HH:mm',\n      lll: 'D/M/YYYY HH:mm',\n      WT: 'dddd HH:mm',\n      YT: 'Hier HH:mm',\n    },\n  },\n  Composer: {\n    send: 'Envoyer',\n  },\n  SendConfirm: {\n    title: 'Envoyer une photo',\n    send: 'Envoyer',\n    cancel: 'Annuler',\n  },\n  RateActions: {\n    up: 'Voter pour',\n    down: 'Vote négatif',\n  },\n  Recorder: {\n    hold2talk: 'Tenir pour parler',\n    release2send: 'Libérer pour envoyer',\n    releaseOrSwipe: 'Relâchez pour envoyer, balayez vers le haut pour annuler',\n    release2cancel: 'Relâcher pour annuler',\n  },\n  Search: {\n    search: 'Chercher',\n  },\n};\n","export default {\n  BackBottom: {\n    newMsgOne: '{n}条新消息',\n    newMsgOther: '{n}条新消息',\n    bottom: '回到底部',\n  },\n  Time: {\n    weekdays: '星期日_星期一_星期二_星期三_星期四_星期五_星期六'.split('_'),\n    formats: {\n      LT: 'HH:mm', // 00:32\n      lll: 'YYYY年M月D日 HH:mm', // 2019年2月22日 00:28\n      WT: 'dddd HH:mm', // 星期一 00:32\n      YT: '昨天 HH:mm', // 昨天 00:32\n    },\n  },\n  Composer: {\n    send: '发送',\n  },\n  SendConfirm: {\n    title: '发送图片',\n    send: '发送',\n    cancel: '取消',\n  },\n  RateActions: {\n    up: '赞同',\n    down: '反对',\n  },\n  Recorder: {\n    hold2talk: '按住 说话',\n    release2send: '松开 发送',\n    releaseOrSwipe: '松开发送，上滑取消',\n    release2cancel: '松开手指，取消发送',\n  },\n  Search: {\n    search: '搜索',\n  },\n};\n","import React, { useContext } from 'react';\nimport defaultLocales from './locales';\n\ntype ILocales = {\n  [k: string]: any;\n};\n\ntype ILocaleContext = {\n  locale?: string;\n  locales?: ILocales;\n};\n\nconst LocaleContext = React.createContext<ILocaleContext>(undefined!);\nconst DEFAULT_LOCALE = 'en-US';\n\nconst LocaleProvider: React.FC<ILocaleContext> = ({ locale, locales, children }) => (\n  <LocaleContext.Provider value={{ locale, locales }}>{children}</LocaleContext.Provider>\n);\n\nLocaleProvider.defaultProps = {\n  locale: DEFAULT_LOCALE,\n};\n\nconst useLocale = (comp?: string, fallback?: any) => {\n  const localeContext = useContext(LocaleContext);\n  const { locale, locales } = localeContext || {};\n  const defaultStrings =\n    (locale && (defaultLocales as ILocales)[locale]) || defaultLocales[DEFAULT_LOCALE];\n  let strings = locales ? { ...defaultStrings, ...locales } : defaultStrings;\n\n  if (!localeContext && fallback) {\n    strings = fallback;\n  } else if (comp) {\n    strings = strings[comp] || {};\n  }\n\n  return {\n    locale,\n    trans: (key?: string) => (key ? strings[key] : strings),\n  };\n};\n\nexport { LocaleProvider, LocaleContext, useLocale };\n","import React from 'react';\nimport clsx from 'clsx';\n\nexport type SystemMessageProps = {\n  className?: string;\n  content: string;\n  action?: {\n    text: string;\n    onClick: (event: React.MouseEvent) => void;\n  };\n};\n\nexport const SystemMessage: React.FC<SystemMessageProps> = (props) => {\n  const { className, content, action } = props;\n  return (\n    <div className={clsx('Message SystemMessage', className)}>\n      <div className=\"SystemMessage-inner\">\n        <span>{content}</span>\n        {action && (\n          <a href=\"javascript:;\" onClick={action.onClick}>\n            {action.text}\n          </a>\n        )}\n      </div>\n    </div>\n  );\n};\n","const REGEX_FORMAT = /YYYY|M|D|dddd|HH|mm/g;\nconst MS_A_DAY = 24 * 60 * 60 * 1000;\nconst MS_A_WEEK = MS_A_DAY * 7;\n\nexport type IDate = number | string | Date;\n\ntype DateFormats = {\n  [p: string]: string;\n};\n\ninterface TimeLocale {\n  weekdays: string[];\n  formats: DateFormats;\n}\n\nconst parseDate = (date: IDate) => {\n  // if (date === null) {\n  //   return new Date(NaN);\n  // }\n  // if (typeof date === 'undefined') {\n  //   return new Date(); // today\n  // }\n  if (date instanceof Date) {\n    return date;\n  }\n  return new Date(date);\n};\n\nconst getWeeHours = () => new Date(new Date().setHours(0, 0, 0, 0));\n\nconst padStart = (n: number) => (n <= 9 ? '0' : '') + n;\n\nconst getFormat = (date: Date) => {\n  const diff = getWeeHours().getTime() - date.getTime();\n\n  if (diff < 0) {\n    return 'LT'; // 今天\n  }\n  if (diff < MS_A_DAY) {\n    return 'YT'; // 昨天\n  }\n  if (diff < MS_A_WEEK) {\n    return 'WT'; // 这周\n  }\n  return 'lll';\n};\n\nfunction formatDate(date: IDate, locale: TimeLocale): string {\n  const $d = parseDate(date);\n  const format = locale.formats[getFormat($d)];\n\n  const dates: DateFormats = {\n    YYYY: `${$d.getFullYear()}`,\n    M: `${$d.getMonth() + 1}`,\n    D: `${$d.getDate()}`,\n    dddd: locale.weekdays[$d.getDay()],\n    HH: padStart($d.getHours()),\n    mm: padStart($d.getMinutes()),\n  };\n\n  return format.replace(REGEX_FORMAT, (match) => dates[match]);\n}\n\nexport default formatDate;\n","import React from 'react';\nimport formatDate, { IDate } from './parser';\nimport { useLocale } from '../LocaleProvider';\n\nexport interface TimeProps {\n  date: IDate;\n}\n\nexport const Time: React.FC<TimeProps> = ({ date }) => {\n  const { trans } = useLocale('Time');\n\n  return (\n    <time className=\"Time\" dateTime={new Date(date).toJSON()}>\n      {formatDate(date, trans())}\n    </time>\n  );\n};\n","import React from 'react';\nimport { Bubble } from '../Bubble';\n\nexport function Typing() {\n  return (\n    <Bubble type=\"typing\">\n      <div className=\"Typing\" aria-busy=\"true\">\n        <div className=\"Typing-dot\" />\n        <div className=\"Typing-dot\" />\n        <div className=\"Typing-dot\" />\n      </div>\n    </Bubble>\n  );\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport { SystemMessage } from './SystemMessage';\nimport { IMessageStatus } from '../MessageStatus';\nimport { Avatar } from '../Avatar';\nimport { Time } from '../Time';\nimport { Typing } from '../Typing';\n\nexport interface User {\n  avatar?: string;\n  name?: string;\n  url?: string;\n  [k: string]: any;\n}\n\nexport type MessageId = string | number;\n\nexport interface MessageProps {\n  /**\n   * 唯一ID\n   */\n  _id: MessageId;\n  /**\n   * 消息类型\n   */\n  type: string;\n  /**\n   * 消息内容\n   */\n  content?: any;\n  /**\n   * 消息创建时间\n   */\n  createdAt?: number;\n  /**\n   * 消息发送者信息\n   */\n  user?: User;\n  /**\n   * 消息位置\n   */\n  position?: 'left' | 'right' | 'center' | 'pop';\n  /**\n   * 是否显示时间\n   */\n  hasTime?: boolean;\n  /**\n   * 状态\n   */\n  status?: IMessageStatus;\n  /**\n   * 消息内容渲染函数\n   */\n  renderMessageContent?: (message: MessageProps) => React.ReactNode;\n}\n\nconst Message = (props: MessageProps) => {\n  const { renderMessageContent = () => null, ...msg } = props;\n  const { type, content, user = {}, _id: id, position = 'left', hasTime = true, createdAt } = msg;\n  const { name, avatar } = user;\n\n  if (type === 'system') {\n    return <SystemMessage content={content.text} action={content.action} />;\n  }\n\n  const isRL = position === 'right' || position === 'left';\n\n  return (\n    <div className={clsx('Message', position)} data-id={id} data-type={type}>\n      {hasTime && createdAt && (\n        <div className=\"Message-meta\">\n          <Time date={createdAt} />\n        </div>\n      )}\n      <div className=\"Message-main\">\n        {isRL && avatar && <Avatar src={avatar} alt={name} url={user.url} />}\n        <div className=\"Message-inner\">\n          {isRL && name && <div className=\"Message-author\">{name}</div>}\n          <div className=\"Message-content\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"false\">\n            {type === 'typing' ? <Typing /> : renderMessageContent(msg)}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default React.memo(Message);\n","import { useRef } from 'react';\n\nlet nextId = 0;\n// eslint-disable-next-line no-plusplus\nconst getNextId = () => nextId++;\n\nexport default function useNextId(prefix = 'id-') {\n  const idRef = useRef(`${prefix}${getNextId()}`);\n  return idRef.current;\n}\n","// IE 不支持 toggle 第二个参数\nexport default (className: string, flag: boolean, el: HTMLElement = document.body) => {\n  el.classList[flag ? 'add' : 'remove'](className);\n}\n","import React, { useEffect, useRef } from 'react';\nimport { createPortal } from 'react-dom';\nimport clsx from 'clsx';\nimport useMount from '../../hooks/useMount';\nimport { Backdrop } from '../Backdrop';\nimport { IconButton } from '../IconButton';\nimport { Button, ButtonProps } from '../Button';\nimport useNextId from '../../hooks/useNextId';\nimport toggleClass from '../../utils/toggleClass';\n\nexport type ModalProps = {\n  active?: boolean;\n  baseClass?: string;\n  className?: string;\n  title?: string;\n  titleId?: string;\n  showClose?: boolean;\n  autoFocus?: boolean;\n  backdrop?: boolean | 'static';\n  height?: number | string;\n  overflow?: boolean;\n  actions?: ButtonProps[];\n  vertical?: boolean;\n  btnVariant?: ButtonProps['variant'];\n  bgColor?: string;\n  onClose?: () => void;\n  onBackdropClick?: () => void;\n};\n\nfunction clearModal() {\n  if (!document.querySelector('.Modal') && !document.querySelector('.Popup')) {\n    toggleClass('S--modalOpen', false);\n  }\n}\n\nexport const Base: React.FC<ModalProps> = (props) => {\n  const {\n    baseClass,\n    active,\n    className,\n    title,\n    showClose = true,\n    autoFocus = true,\n    backdrop = true,\n    height,\n    overflow,\n    actions,\n    vertical = true,\n    btnVariant,\n    bgColor,\n    children,\n    onBackdropClick,\n    onClose,\n  } = props;\n\n  const mid = useNextId('modal-');\n  const titleId = props.titleId || mid;\n\n  const wrapper = useRef<HTMLDivElement>(null);\n  const { didMount, isShow } = useMount({ active, ref: wrapper });\n\n  useEffect(() => {\n    setTimeout(() => {\n      if (autoFocus && wrapper.current) {\n        wrapper.current.focus();\n      }\n    });\n  }, [autoFocus]);\n\n  useEffect(() => {\n    if (isShow) {\n      toggleClass('S--modalOpen', isShow);\n    }\n  }, [isShow]);\n\n  useEffect(() => {\n    if (!active && !didMount) {\n      clearModal();\n    }\n  }, [active, didMount]);\n\n  useEffect(\n    () => () => {\n      clearModal();\n    },\n    [],\n  );\n\n  if (!didMount) return null;\n\n  const isPopup = baseClass === 'Popup';\n\n  return createPortal(\n    <div className={clsx(baseClass, className, { active: isShow })} ref={wrapper} tabIndex={-1}>\n      {backdrop && (\n        <Backdrop\n          active={isShow}\n          onClick={backdrop === true ? onBackdropClick || onClose : undefined}\n        />\n      )}\n      <div\n        className={clsx(`${baseClass}-dialog`, { 'pb-safe': isPopup && !actions })}\n        data-bg-color={bgColor}\n        data-height={isPopup && height ? height : undefined}\n        role=\"dialog\"\n        aria-labelledby={titleId}\n        aria-modal\n      >\n        <div className={`${baseClass}-content`}>\n          <div className={`${baseClass}-header`}>\n            <h5 className={`${baseClass}-title`} id={titleId}>\n              {title}\n            </h5>\n            {showClose && onClose && (\n              <IconButton\n                className={`${baseClass}-close`}\n                icon=\"close\"\n                size=\"lg\"\n                onClick={onClose}\n                aria-label=\"关闭\"\n              />\n            )}\n          </div>\n          <div className={clsx(`${baseClass}-body`, { overflow })}>{children}</div>\n          {actions && (\n            <div\n              className={`${baseClass}-footer ${baseClass}-footer--${vertical ? 'v' : 'h'}`}\n              data-variant={btnVariant || 'round'}\n            >\n              {actions.map((item) => (\n                <Button size=\"lg\" block={isPopup} variant={btnVariant} {...item} key={item.label} />\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>,\n    document.body,\n  );\n};\n","import React from 'react';\nimport { Base, ModalProps } from './Base';\n\nexport const Modal: React.FC<ModalProps> = (props) => (\n  <Base\n    baseClass=\"Modal\"\n    btnVariant={props.vertical === false ? undefined : 'outline'}\n    {...props}\n  />\n);\n","import React from 'react';\r\nimport clsx from 'clsx';\r\nimport { IconButton, IconButtonProps } from '../IconButton';\r\n\r\nexport type NavbarProps = {\r\n  title: string;\r\n  className?: string;\r\n  logo?: string;\r\n  leftContent?: IconButtonProps;\r\n  rightContent?: IconButtonProps[];\r\n};\r\n\r\nexport const Navbar: React.FC<NavbarProps> = (props) => {\r\n  const { className, title, logo, leftContent, rightContent = [] } = props;\r\n  return (\r\n    <header className={clsx('Navbar', className)}>\r\n      <div className=\"Navbar-left\">{leftContent && <IconButton size=\"lg\" {...leftContent} />}</div>\r\n      <div className=\"Navbar-main\">\r\n        {logo ? (\r\n          <img className=\"Navbar-logo\" src={logo} alt={title} />\r\n        ) : (\r\n          <h2 className=\"Navbar-title\">{title}</h2>\r\n        )}\r\n      </div>\r\n      <div className=\"Navbar-right\">\r\n        {rightContent.map((item) => (\r\n          <IconButton size=\"lg\" {...item} key={item.icon} />\r\n        ))}\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\n","/* eslint-disable react/no-array-index-key */\r\nimport React from 'react';\r\nimport clsx from 'clsx';\r\n\r\nexport interface PriceProps {\r\n  price: number;\r\n  className?: string;\r\n  locale?: string;\r\n  currency?: string;\r\n  original?: boolean;\r\n}\r\n\r\nconst canFormat =\r\n  'Intl' in window && typeof Intl.NumberFormat.prototype.formatToParts === 'function';\r\n\r\nexport const Price = React.forwardRef<HTMLDivElement, PriceProps>((props, ref) => {\r\n  const { className, price, currency, locale, original, ...other } = props;\r\n  let parts: any[] | void = [];\r\n\r\n  if (locale && currency && canFormat) {\r\n    parts = new Intl.NumberFormat(locale, { style: 'currency', currency }).formatToParts(price);\r\n  } else {\r\n    parts = undefined;\r\n  }\r\n\r\n  if (!parts) {\r\n    const decimal = '.';\r\n    const [integer, fraction] = `${price}`.split(decimal);\r\n    parts = [\r\n      { type: 'currency', value: currency },\r\n      { type: 'integer', value: integer },\r\n      { type: 'decimal', value: fraction && decimal },\r\n      { type: 'fraction', value: fraction },\r\n    ];\r\n  }\r\n\r\n  return (\r\n    <div className={clsx('Price', { 'Price--original': original }, className)} ref={ref} {...other}>\r\n      {parts.map((t, i) =>\r\n        t.value ? (\r\n          <span className={`Price-${t.type}`} key={i}>\r\n            {t.value}\r\n          </span>\r\n        ) : null,\r\n      )}\r\n    </div>\r\n  );\r\n});\r\n","import { useState, useEffect, useLayoutEffect } from 'react';\r\nimport { createPortal } from 'react-dom';\r\n\r\ntype Container = React.RefObject<any> | Element | (() => Element) | null;\r\n\r\nexport interface PortalProps {\r\n  container?: Container;\r\n  onRendered?: () => void;\r\n}\r\n\r\nfunction getEl(el: Container) {\r\n  if (!el) return null;\r\n\r\n  if (el instanceof Element) {\r\n    return el;\r\n  }\r\n  return typeof el === 'function' ? el() : el.current || el;\r\n}\r\n\r\nexport const Portal: React.FC<PortalProps> = (props) => {\r\n  const { children, container = document.body, onRendered } = props;\r\n  const [mountNode, setMountNode] = useState<Element | null>(null);\r\n\r\n  useEffect(() => {\r\n    setMountNode(getEl(container));\r\n  }, [container]);\r\n\r\n  useLayoutEffect(() => {\r\n    if (onRendered && mountNode) {\r\n      onRendered();\r\n    }\r\n  }, [mountNode, onRendered]);\r\n\r\n  return mountNode ? createPortal(children, mountNode) : mountNode;\r\n};\r\n","const rAF = requestAnimationFrame;\n\ninterface Props {\n  el: HTMLElement;\n  to: number;\n  duration?: number;\n  x?: boolean;\n}\n\nexport default function smoothScroll({ el, to, duration = 300, x }: Props) {\n  let count = 0;\n  const attr = x ? 'scrollLeft' : 'scrollTop';\n  const from = el[attr];\n  const frames = Math.round(duration / 16);\n  const step = (to - from) / frames;\n\n  if (!rAF) {\n    el[attr] = to;\n    return;\n  }\n\n  function animate() {\n    // eslint-disable-next-line no-param-reassign\n    el[attr] += step;\n\n    // eslint-disable-next-line no-plusplus\n    if (++count < frames) {\n      rAF(animate);\n    }\n  }\n\n  animate();\n}\n","import React, { useState, useEffect, useRef, useCallback, useImperativeHandle } from 'react';\nimport clsx from 'clsx';\nimport { setTransform } from '../../utils/style';\nimport { Icon } from '../Icon';\nimport { Flex } from '../Flex';\nimport { Button } from '../Button';\nimport canUse from '../../utils/canUse';\nimport smoothScroll from '../../utils/smoothScroll';\n\nconst canPassive = canUse('passiveListener');\nconst listenerOpts = canPassive ? { passive: true } : false;\nconst listenerOptsWithoutPassive = canPassive ? { passive: false } : false;\n\ntype PullToRefreshStatus = 'pending' | 'pull' | 'active' | 'loading';\n\nexport interface PullToRefreshProps {\n  distance?: number;\n  loadingDistance?: number;\n  distanceRatio?: number;\n  loadMoreText?: string;\n  maxDistance?: number;\n  onRefresh?: () => Promise<any>;\n  onScroll?: (event: React.UIEvent<HTMLDivElement, UIEvent>) => void;\n  renderIndicator?: (status: PullToRefreshStatus, distance: number) => React.ReactNode;\n  children: React.ReactNode;\n}\n\nexport interface ScrollToEndOptions {\n  animated?: boolean;\n  force?: boolean;\n}\n\ninterface PTRScrollToOptions extends ScrollToEndOptions {\n  y: number | '100%';\n}\n\nexport interface PullToRefreshHandle {\n  scrollTo: (opts: PTRScrollToOptions) => void;\n  scrollToEnd: (opts?: ScrollToEndOptions) => void;\n  wrapperRef: React.RefObject<HTMLDivElement>;\n}\n\nexport const PullToRefresh = React.forwardRef<PullToRefreshHandle, PullToRefreshProps>(\n  (props, ref) => {\n    const {\n      distance: oDistance = 30,\n      loadingDistance = 30,\n      maxDistance,\n      distanceRatio = 2,\n      loadMoreText = '点击加载更多',\n      children,\n      onScroll,\n      onRefresh,\n      renderIndicator = (status: PullToRefreshStatus) => {\n        if (status === 'active' || status === 'loading') {\n          return <Icon className=\"PullToRefresh-spinner\" type=\"spinner\" spin />;\n        }\n        return null;\n      },\n    } = props;\n\n    const wrapperRef = useRef<HTMLDivElement>(null);\n    const contentRef = useRef<HTMLDivElement>(null);\n\n    const [distance, setDistance] = useState(0);\n    const [status, setStatus] = useState<PullToRefreshStatus>('pending');\n    const [dropped, setDropped] = useState(false);\n    const [disabled, setDisabled] = useState(!props.onRefresh);\n    const sharedRef = useRef<any>({});\n    const statusRef = useRef<PullToRefreshStatus>(status);\n    const timer1 = useRef<ReturnType<typeof setTimeout>>();\n    const timer2 = useRef<ReturnType<typeof setTimeout>>();\n\n    const useFallback = !canUse('touch');\n\n    useEffect(() => {\n      statusRef.current = status;\n    }, [status]);\n\n    const setContentStyle = (y: number) => {\n      const content = contentRef.current;\n      if (content) {\n        setTransform(content, `translate3d(0px,${y}px,0)`);\n      }\n    };\n\n    const scrollTo = ({ y, animated = true }: PTRScrollToOptions) => {\n      const scroller = wrapperRef.current;\n\n      if (!scroller) return;\n\n      const offsetTop = y === '100%' ? scroller.scrollHeight - scroller.offsetHeight : y;\n\n      if (animated) {\n        smoothScroll({\n          el: scroller,\n          to: offsetTop,\n          x: false,\n        });\n      } else {\n        scroller.scrollTop = offsetTop;\n      }\n    };\n\n    const scrollToEnd = useCallback(({ animated = true }: ScrollToEndOptions = {}) => {\n      scrollTo({ y: '100%', animated });\n    }, []);\n\n    const reset = useCallback(() => {\n      setDistance(0);\n      setStatus('pending');\n      setContentStyle(0);\n    }, []);\n\n    const handleLoadMore = useCallback(() => {\n      const scroller = wrapperRef.current;\n\n      if (!scroller) return;\n\n      setStatus('loading');\n\n      try {\n        const sh = scroller.scrollHeight;\n\n        onRefresh!().then((res) => {\n          const handleOffset = () => {\n            scrollTo({\n              y: scroller.scrollHeight - sh - 50,\n              animated: false,\n            });\n          };\n\n          clearTimeout(timer1.current);\n          clearTimeout(timer2.current);\n          handleOffset();\n          timer1.current = setTimeout(handleOffset, 150);\n          timer2.current = setTimeout(handleOffset, 250);\n\n          reset();\n\n          if (res && res.noMore) {\n            setDisabled(true);\n          }\n        });\n      } catch (ex) {\n        // eslint-disable-next-line no-console\n        console.error(ex);\n        reset();\n      }\n    }, [onRefresh, reset]);\n\n    const touchStart = (e: TouchEvent) => {\n      sharedRef.current.startY = e.touches[0].clientY;\n      sharedRef.current.canPull = wrapperRef.current && wrapperRef.current.scrollTop <= 0;\n\n      if (sharedRef.current.canPull) {\n        setStatus('pull');\n        setDropped(false);\n      }\n    };\n\n    const touchMove = useCallback(\n      (e: TouchEvent) => {\n        const currentY = e.touches[0].clientY;\n\n        const { canPull, startY } = sharedRef.current;\n\n        if (!canPull || currentY < startY || statusRef.current === 'loading') return;\n\n        let dist = (currentY - startY) / distanceRatio;\n        if (maxDistance && dist > maxDistance) {\n          dist = maxDistance;\n        }\n\n        if (dist > 0) {\n          if (e.cancelable) {\n            e.preventDefault();\n          }\n          e.stopPropagation();\n\n          setContentStyle(dist);\n          setDistance(dist);\n          setStatus(dist >= oDistance ? 'active' : 'pull');\n        }\n      },\n      [distanceRatio, maxDistance, oDistance],\n    );\n\n    const touchEnd = useCallback(() => {\n      setDropped(true);\n\n      if (statusRef.current === 'active') {\n        handleLoadMore();\n      } else {\n        reset();\n      }\n    }, [handleLoadMore, reset]);\n\n    useEffect(() => {\n      const wrapper = wrapperRef.current;\n\n      if (!wrapper || useFallback) return;\n\n      if (disabled) {\n        wrapper.removeEventListener('touchstart', touchStart);\n        wrapper.removeEventListener('touchmove', touchMove);\n        wrapper.removeEventListener('touchend', touchEnd);\n        wrapper.removeEventListener('touchcancel', touchEnd);\n      } else {\n        wrapper.addEventListener('touchstart', touchStart, listenerOpts);\n        wrapper.addEventListener('touchmove', touchMove, listenerOptsWithoutPassive);\n        wrapper.addEventListener('touchend', touchEnd);\n        wrapper.addEventListener('touchcancel', touchEnd);\n      }\n    }, [disabled, touchEnd, touchMove, useFallback]);\n\n    useEffect(() => {\n      if (status === 'loading' && !useFallback) {\n        setContentStyle(loadingDistance);\n      }\n    }, [loadingDistance, status, useFallback]);\n\n    useImperativeHandle(\n      ref,\n      () => ({\n        scrollTo,\n        scrollToEnd,\n        wrapperRef,\n      }),\n      [scrollToEnd],\n    );\n\n    return (\n      <div className=\"PullToRefresh\" ref={wrapperRef} onScroll={onScroll}>\n        <div className=\"PullToRefresh-inner\">\n          <div\n            className={clsx('PullToRefresh-content', {\n              'PullToRefresh-transition': dropped,\n            })}\n            ref={contentRef}\n          >\n            <div className=\"PullToRefresh-indicator\">{renderIndicator(status, distance)}</div>\n            {!disabled && useFallback && (\n              <Flex className=\"PullToRefresh-fallback\" center>\n                {renderIndicator(status, oDistance)}\n                <Button className=\"PullToRefresh-loadMore\" variant=\"text\" onClick={handleLoadMore}>\n                  {loadMoreText}\n                </Button>\n              </Flex>\n            )}\n            {React.Children.only(children)}\n          </div>\n        </div>\n      </div>\n    );\n  },\n);\n","import React, { useEffect, useRef } from 'react';\nimport clsx from 'clsx';\n\nexport type ScrollViewEffect = 'slide' | 'fade' | '';\n\nexport type ScrollViewItemProps = {\n  item: any;\n  effect?: ScrollViewEffect;\n  onIntersect?: (item?: any, entry?: IntersectionObserverEntry) => boolean | void;\n};\n\nconst observerOptions = {\n  threshold: [0, 0.1],\n};\n\nexport const Item: React.FC<ScrollViewItemProps> = (props) => {\n  const { item, effect, children, onIntersect } = props;\n  const itemRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (!onIntersect) return undefined;\n\n    const observer = new IntersectionObserver(([entry]) => {\n      if (entry.intersectionRatio > 0) {\n        // 根据回调返回值判断是否继续监听\n        if (!onIntersect(item, entry)) {\n          observer.unobserve(entry.target);\n        }\n      }\n    }, observerOptions);\n\n    if (itemRef.current) {\n      observer.observe(itemRef.current);\n    }\n    return () => {\n      observer.disconnect();\n    };\n  }, [item, onIntersect]);\n\n  return (\n    <div\n      className={clsx('ScrollView-item', {\n        'slide-in-right-item': effect === 'slide',\n        'A-fadeIn': effect === 'fade',\n      })}\n      ref={itemRef}\n    >\n      {children}\n    </div>\n  );\n};\n","import React, { useRef, useImperativeHandle, useCallback } from 'react';\nimport clsx from 'clsx';\nimport { Item, ScrollViewItemProps } from './Item';\nimport { IconButton } from '../IconButton';\nimport canUse from '../../utils/canUse';\n\nexport type ScrollViewProps<T> = Pick<ScrollViewItemProps, 'effect' | 'onIntersect'> & {\n  data: Array<T>;\n  renderItem: (item: T, index: number) => React.ReactNode;\n  className?: string;\n  fullWidth?: boolean;\n  scrollX?: boolean;\n  itemKey?: string | ((item: T, index: number) => string);\n  onScroll?: (event: React.UIEvent<HTMLDivElement, UIEvent>) => void;\n  children?: React.ReactNode;\n};\n\nconst hasControls = !canUse('touch');\n\nexport interface ScrollViewHandle {\n  scrollTo: (coord: { x?: number; y?: number }) => void;\n}\n\nexport const ScrollView = React.forwardRef<ScrollViewHandle, ScrollViewProps<any>>((props, ref) => {\n  const {\n    className,\n    fullWidth,\n    scrollX = true,\n    effect = 'slide',\n    data,\n    itemKey,\n    renderItem,\n    onIntersect,\n    onScroll,\n    children,\n    ...other\n  } = props;\n\n  const scrollerRef = useRef<HTMLDivElement>(null!);\n\n  function handlePrev() {\n    const el = scrollerRef.current;\n    el.scrollLeft -= el.offsetWidth;\n  }\n\n  function handleNext() {\n    const el = scrollerRef.current;\n    el.scrollLeft += el.offsetWidth;\n  }\n\n  const getItemKey = useCallback(\n    (item: any, index: number) => {\n      let key;\n      if (itemKey) {\n        key = typeof itemKey === 'function' ? itemKey(item, index) : item[itemKey];\n      }\n      return key || index;\n    },\n    [itemKey],\n  );\n\n  useImperativeHandle(ref, () => ({\n    scrollTo: ({ x, y }: { x?: number; y?: number }) => {\n      if (x != null) {\n        scrollerRef.current.scrollLeft = x;\n      }\n      if (y != null) {\n        scrollerRef.current.scrollTop = y;\n      }\n    },\n  }));\n\n  return (\n    <div\n      className={clsx(\n        'ScrollView',\n        {\n          'ScrollView--fullWidth': fullWidth,\n          'ScrollView--x': scrollX,\n          'ScrollView--hasControls': hasControls,\n        },\n        className,\n      )}\n      ref={ref as React.RefObject<HTMLDivElement>}\n      {...other}\n    >\n      {hasControls && (\n        <IconButton\n          className=\"ScrollView-control\"\n          icon=\"chevron-left\"\n          aria-label=\"Previous\"\n          onClick={handlePrev}\n        />\n      )}\n      <div className=\"ScrollView-scroller\" ref={scrollerRef} onScroll={onScroll}>\n        <div className=\"ScrollView-inner\">\n          {data.map((item, i) => (\n            <Item\n              item={item}\n              effect={item.effect || effect}\n              onIntersect={onIntersect}\n              key={getItemKey(item, i)}\n            >\n              {renderItem(item, i)}\n            </Item>\n          ))}\n          {children ? (\n            <Item item={{}} effect={effect} onIntersect={onIntersect}>\n              {children}\n            </Item>\n          ) : null}\n        </div>\n      </div>\n      {hasControls && (\n        <IconButton\n          className=\"ScrollView-control\"\n          icon=\"chevron-right\"\n          aria-label=\"Next\"\n          onClick={handleNext}\n        />\n      )}\n    </div>\n  );\n});\n","import React from 'react';\nimport clsx from 'clsx';\nimport { Icon } from '../Icon';\n\nexport interface QuickReplyItemProps {\n  name: string;\n  code?: string;\n  icon?: string;\n  img?: string;\n  isNew?: boolean;\n  isHighlight?: boolean;\n}\n\nexport interface QuickReplyProps {\n  item: QuickReplyItemProps;\n  index: number;\n  onClick: (item: QuickReplyItemProps, index: number) => void;\n}\n\nexport const QuickReply = (props: QuickReplyProps) => {\n  const { item, index, onClick } = props;\n\n  function handleClick() {\n    onClick(item, index);\n  }\n\n  return (\n    <button\n      className={clsx('QuickReply', {\n        new: item.isNew,\n        highlight: item.isHighlight,\n      })}\n      type=\"button\"\n      data-code={item.code}\n      aria-label={`快捷短语: ${item.name}，双击发送`}\n      onClick={handleClick}\n    >\n      <div className=\"QuickReply-inner\">\n        {item.icon && <Icon type={item.icon} />}\n        {item.img && <img className=\"QuickReply-img\" src={item.img} alt=\"\" />}\n        <span>{item.name}</span>\n      </div>\n    </button>\n  );\n};\n","import React, { useState, useLayoutEffect, useRef } from 'react';\nimport { ScrollView, ScrollViewHandle } from '../ScrollView/ScrollView';\nimport { QuickReply, QuickReplyItemProps } from './QuickReply';\n\nexport interface QuickRepliesProps {\n  items: QuickReplyItemProps[];\n  visible?: boolean;\n  onClick: (item: QuickReplyItemProps, index: number) => void;\n  onScroll?: (event: React.UIEvent<HTMLDivElement, UIEvent>) => void;\n}\n\nconst QuickReplies = (props: QuickRepliesProps) => {\n  const { items, visible, onClick, onScroll } = props;\n  const scroller = useRef<ScrollViewHandle>(null);\n  const [scrollEvent, setScrollEvent] = useState(!!onScroll);\n\n  useLayoutEffect(() => {\n    let timer: ReturnType<typeof setTimeout>;\n\n    if (scroller.current) {\n      setScrollEvent(false);\n      scroller.current.scrollTo({ x: 0, y: 0 });\n      timer = setTimeout(() => {\n        setScrollEvent(true);\n      }, 500);\n    }\n\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [items]);\n\n  if (!items.length) return null;\n\n  return (\n    <ScrollView\n      className=\"QuickReplies\"\n      data={items}\n      itemKey=\"name\"\n      ref={scroller}\n      data-visible={visible}\n      onScroll={scrollEvent ? onScroll : undefined}\n      renderItem={(item: QuickReplyItemProps, index) => (\n        <QuickReply item={item} index={index} onClick={onClick} key={item.name} />\n      )}\n    />\n  );\n};\n\nQuickReplies.defaultProps = {\n  items: [],\n  visible: true,\n};\n\nexport default React.memo(QuickReplies);\n","import DOMPurify from 'dompurify';\n\nDOMPurify.addHook('beforeSanitizeAttributes', (node: Element) => {\n  if (node instanceof HTMLElement && node.hasAttribute('href')) {\n    const href = node.getAttribute('href');\n\n    if (href) {\n      node.dataset.cuiHref = href;\n    }\n    if (node.getAttribute('target') === '_blank') {\n      node.dataset.cuiTarget = '1';\n    }\n  }\n});\n\nDOMPurify.addHook('afterSanitizeAttributes', (node: Element) => {\n  if (node instanceof HTMLElement) {\n    if (node.dataset.cuiHref && node.hasAttribute('href')) {\n      node.removeAttribute('data-cui-href');\n    }\n    if (node.dataset.cuiTarget) {\n      node.setAttribute('target', '_blank');\n      node.setAttribute('rel', 'noopener noreferrer');\n      node.removeAttribute('data-cui-target');\n    }\n  }\n});\n","import React from 'react';\nimport { mountComponent } from '../../utils/mountComponent';\nimport { Toast, ToastProps } from './Toast';\n\nfunction show(content: string, type: ToastProps['type'], duration = 2000) {\n  mountComponent(<Toast content={content} type={type} duration={duration} />);\n}\n\nexport const toast = {\n  show,\n  success(content: string, duration?: number) {\n    show(content, 'success', duration);\n  },\n  fail(content: string, duration?: number) {\n    show(content, 'error', duration);\n  },\n  loading(content: string, duration?: number) {\n    show(content, 'loading', duration);\n  },\n};\n\nexport { Toast };\nexport type { ToastProps };\n","import React from 'react';\nimport { Button } from '../Button';\nimport { Icon } from '../Icon';\n\nexport interface ToolbarItemProps {\n  type: string;\n  title: string;\n  icon?: string;\n  img?: string;\n  render?: any; // FIXME\n}\n\nexport interface ToolbarButtonProps {\n  item: ToolbarItemProps;\n  onClick: (item: ToolbarItemProps, event: React.MouseEvent) => void;\n}\n\nexport const ToolbarButton: React.FC<ToolbarButtonProps> = (props) => {\n  const { item, onClick } = props;\n  const { type, icon, img, title } = item;\n\n  return (\n    <div className=\"Toolbar-item\" data-type={type}>\n      <Button className=\"Toolbar-btn\" onClick={(e) => onClick(item, e)}>\n        <span className=\"Toolbar-btnIcon\">\n          {icon && <Icon type={icon} />}\n          {img && <img className=\"Toolbar-img\" src={img} alt=\"\" />}\n        </span>\n        <span className=\"Toolbar-btnText\">{title}</span>\n      </Button>\n    </div>\n  );\n};\n","import React from 'react';\nimport { ToolbarButton, ToolbarItemProps } from './ToolbarButton';\n\nexport interface ToolbarProps {\n  items: ToolbarItemProps[];\n  onClick: (item: ToolbarItemProps, event: React.MouseEvent) => void;\n}\n\nexport const Toolbar: React.FC<ToolbarProps> = (props) => {\n  const { items, onClick } = props;\n  return (\n    <div className=\"Toolbar\">\n      {items.map((item) => (\n        <ToolbarButton item={item} onClick={onClick} key={item.type} />\n      ))}\n    </div>\n  );\n};\n","import React, { useEffect } from 'react';\nimport { Button } from '../Button';\nimport { Icon } from '../Icon';\nimport { useLocale } from '../LocaleProvider';\n\ninterface BackBottomProps {\n  count: number;\n  onClick: () => void;\n  onDidMount?: () => void;\n}\n\nexport const BackBottom = ({ count, onClick, onDidMount }: BackBottomProps) => {\n  const { trans } = useLocale('BackBottom');\n  let text = trans('bottom');\n  if (count) {\n    text = trans(count === 1 ? 'newMsgOne' : 'newMsgOther').replace('{n}', count);\n  }\n\n  useEffect(() => {\n    if (onDidMount) {\n      onDidMount();\n    }\n  }, [onDidMount]);\n\n  return (\n    <div className=\"BackBottom\">\n      <Button className=\"slide-in-right-item\" onClick={onClick}>\n        {text}\n        <Icon type=\"chevron-double-down\" />\n      </Button>\n    </div>\n  );\n};\n","/* eslint-disable no-underscore-dangle */\nimport React, { useState, useEffect, useRef, useCallback, useImperativeHandle } from 'react';\nimport { PullToRefresh, PullToRefreshHandle, ScrollToEndOptions } from '../PullToRefresh';\nimport { Message, MessageProps } from '../Message';\nimport { BackBottom } from '../BackBottom';\nimport canUse from '../../utils/canUse';\nimport throttle from '../../utils/throttle';\nimport getToBottom from '../../utils/getToBottom';\n\nconst listenerOpts = canUse('passiveListener') ? { passive: true } : false;\n\nexport interface MessageContainerProps {\n  messages: MessageProps[];\n  renderMessageContent: (message: MessageProps) => React.ReactNode;\n  loadMoreText?: string;\n  onRefresh?: () => Promise<any>;\n  onScroll?: (event: React.UIEvent<HTMLDivElement, UIEvent>) => void;\n  renderBeforeMessageList?: () => React.ReactNode;\n  onBackBottomShow?: () => void;\n  onBackBottomClick?: () => void;\n}\n\nexport interface MessageContainerHandle {\n  ref: React.RefObject<HTMLDivElement>;\n  scrollToEnd: (options?: ScrollToEndOptions) => void;\n}\n\nfunction isNearBottom(el: HTMLElement, n: number) {\n  const offsetHeight = Math.max(el.offsetHeight, 600);\n  return getToBottom(el) < offsetHeight * n;\n}\n\nexport const MessageContainer = React.forwardRef<MessageContainerHandle, MessageContainerProps>(\n  (props, ref) => {\n    const {\n      messages,\n      loadMoreText,\n      onRefresh,\n      onScroll,\n      renderBeforeMessageList,\n      renderMessageContent,\n      onBackBottomShow,\n      onBackBottomClick,\n    } = props;\n\n    const [showBackBottom, setShowBackBottom] = useState(false);\n    const [newCount, setNewCount] = useState(0);\n    const showBackBottomtRef = useRef(showBackBottom);\n    const newCountRef = useRef(newCount);\n    const messagesRef = useRef<HTMLDivElement>(null);\n    const scrollerRef = useRef<PullToRefreshHandle>(null);\n    const lastMessage = messages[messages.length - 1];\n\n    const clearBackBottom = () => {\n      setNewCount(0);\n      setShowBackBottom(false);\n    };\n\n    const scrollToEnd = useCallback((opts?: ScrollToEndOptions) => {\n      if (scrollerRef.current) {\n        if (!showBackBottomtRef.current || (opts && opts.force)) {\n          scrollerRef.current.scrollToEnd(opts);\n          if (showBackBottomtRef.current) {\n            clearBackBottom();\n          }\n        }\n      }\n    }, []);\n\n    const handleBackBottomClick = () => {\n      scrollToEnd({ animated: false, force: true });\n      // setNewCount(0);\n      // setShowBackBottom(false);\n\n      if (onBackBottomClick) {\n        onBackBottomClick();\n      }\n    };\n\n    const checkShowBottomRef = useRef(\n      throttle((el: HTMLElement) => {\n        if (isNearBottom(el, 3)) {\n          if (newCountRef.current) {\n            // 如果有新消息，离底部0.5屏-隐藏提示\n            if (isNearBottom(el, 0.5)) {\n              // setNewCount(0);\n              // setShowBackBottom(false);\n              clearBackBottom();\n            }\n          } else {\n            setShowBackBottom(false);\n          }\n        } else {\n          // 3屏+显示回到底部\n          setShowBackBottom(true);\n        }\n      }),\n    );\n\n    const handleScroll = (e: React.UIEvent<HTMLDivElement, UIEvent>) => {\n      checkShowBottomRef.current(e.target);\n\n      if (onScroll) {\n        onScroll(e);\n      }\n    };\n\n    useEffect(() => {\n      newCountRef.current = newCount;\n    }, [newCount]);\n\n    useEffect(() => {\n      showBackBottomtRef.current = showBackBottom;\n    }, [showBackBottom]);\n\n    useEffect(() => {\n      const scroller = scrollerRef.current;\n      const wrapper = scroller && scroller.wrapperRef.current;\n\n      if (!wrapper || !lastMessage || lastMessage.position === 'pop') {\n        return;\n      }\n\n      if (lastMessage.position === 'right') {\n        // 自己发的消息，强制滚动到底部\n        scrollToEnd({ force: true });\n      } else if (isNearBottom(wrapper, 2)) {\n        const animated = !!wrapper.scrollTop;\n        scrollToEnd({ animated, force: true });\n      } else {\n        setNewCount((c) => c + 1);\n        setShowBackBottom(true);\n      }\n    }, [lastMessage, scrollToEnd]);\n\n    useEffect(() => {\n      const wrapper = messagesRef.current!;\n\n      let needBlur = false;\n      let startY = 0;\n\n      function reset() {\n        needBlur = false;\n        startY = 0;\n      }\n\n      function touchStart(e: TouchEvent) {\n        const { activeElement } = document;\n        if (activeElement && activeElement.nodeName === 'TEXTAREA') {\n          needBlur = true;\n          startY = e.touches[0].clientY;\n        }\n      }\n\n      function touchMove(e: TouchEvent) {\n        if (needBlur && Math.abs(e.touches[0].clientY - startY) > 20) {\n          (document.activeElement as HTMLElement).blur();\n          reset();\n        }\n      }\n\n      wrapper.addEventListener('touchstart', touchStart, listenerOpts);\n      wrapper.addEventListener('touchmove', touchMove, listenerOpts);\n      wrapper.addEventListener('touchend', reset);\n      wrapper.addEventListener('touchcancel', reset);\n\n      return () => {\n        wrapper.removeEventListener('touchstart', touchStart);\n        wrapper.removeEventListener('touchmove', touchMove);\n        wrapper.removeEventListener('touchend', reset);\n        wrapper.removeEventListener('touchcancel', reset);\n      };\n    }, []);\n\n    useImperativeHandle(ref, () => ({ ref: messagesRef, scrollToEnd }), [scrollToEnd]);\n\n    return (\n      <div className=\"MessageContainer\" ref={messagesRef} tabIndex={-1}>\n        {renderBeforeMessageList && renderBeforeMessageList()}\n        <PullToRefresh\n          onRefresh={onRefresh}\n          onScroll={handleScroll}\n          loadMoreText={loadMoreText}\n          ref={scrollerRef}\n        >\n          <div className=\"MessageList\">\n            {messages.map((msg) => (\n              <Message {...msg} renderMessageContent={renderMessageContent} key={msg._id} />\n            ))}\n          </div>\n        </PullToRefresh>\n        {showBackBottom && (\n          <BackBottom\n            count={newCount}\n            onClick={handleBackBottomClick}\n            onDidMount={onBackBottomShow}\n          />\n        )}\n      </div>\n    );\n  },\n);\n","export default function throttle(fn: Function, delay = 300) {\n  let ready = true;\n\n  return (...args: any) => {\n    if (!ready) {\n      return;\n    }\n\n    ready = false;\n    fn(...args);\n\n    setTimeout(() => {\n      ready = true;\n    }, delay);\n  };\n}\n","import React, { useState, useEffect, useRef, useImperativeHandle, useCallback } from 'react';\nimport clsx from 'clsx';\nimport { Flex } from '../Flex';\nimport { Icon } from '../Icon';\nimport { useLocale } from '../LocaleProvider';\nimport canUse from '../../utils/canUse';\n\nconst canPassive = canUse('passiveListener');\nconst listenerOpts = canPassive ? { passive: true } : false;\nconst listenerOptsWithoutPassive = canPassive ? { passive: false } : false;\nconst MOVE_INTERVAL = 80;\n\ninterface ButtonTextMap {\n  [k: string]: string;\n}\n\nconst btnTextMap: ButtonTextMap = {\n  inited: 'hold2talk',\n  recording: 'release2send',\n  willCancel: 'release2send',\n};\n\nlet ts = 0;\nlet startY = 0;\n\nexport interface RecorderHandle {\n  stop: () => void;\n}\n\nexport interface RecorderProps {\n  canRecord?: boolean;\n  volume?: number;\n  onStart?: () => void;\n  onEnd?: (data: { duration: number }) => void;\n  onCancel?: () => void;\n  ref?: React.MutableRefObject<RecorderHandle>;\n}\n\nexport const Recorder = React.forwardRef<RecorderHandle, RecorderProps>((props, ref) => {\n  const { volume, onStart, onEnd, onCancel } = props;\n  const [status, setStatus] = useState('inited');\n  const btnRef = useRef<HTMLDivElement>(null);\n  const { trans } = useLocale('Recorder');\n\n  const doEnd = useCallback(() => {\n    const duration = Date.now() - ts;\n    if (onEnd) {\n      onEnd({ duration });\n    }\n  }, [onEnd]);\n\n  useImperativeHandle(ref, () => ({\n    stop() {\n      setStatus('inited');\n      doEnd();\n      ts = 0;\n    },\n  }));\n\n  useEffect(() => {\n    const wrapper = btnRef.current!;\n\n    function handleTouchStart(e: TouchEvent) {\n      if (e.cancelable) {\n        e.preventDefault();\n      }\n      const touch0 = e.touches[0];\n      startY = touch0.pageY;\n      ts = Date.now();\n      setStatus('recording');\n\n      if (onStart) {\n        onStart();\n      }\n    }\n\n    function handleTouchMove(e: TouchEvent) {\n      if (!ts) return;\n      const nowY = e.touches[0].pageY;\n      const isCancel = startY - nowY > MOVE_INTERVAL;\n      setStatus(isCancel ? 'willCancel' : 'recording');\n    }\n\n    function handleTouchEnd(e: TouchEvent) {\n      if (!ts) return;\n      const endY = e.changedTouches[0].pageY;\n      const isRecording = startY - endY < MOVE_INTERVAL;\n\n      setStatus('inited');\n\n      if (isRecording) {\n        doEnd();\n      } else if (onCancel) {\n        onCancel();\n      }\n    }\n\n    wrapper.addEventListener('touchstart', handleTouchStart, listenerOptsWithoutPassive);\n    wrapper.addEventListener('touchmove', handleTouchMove, listenerOpts);\n    wrapper.addEventListener('touchend', handleTouchEnd);\n    wrapper.addEventListener('touchcancel', handleTouchEnd);\n\n    return () => {\n      wrapper.removeEventListener('touchstart', handleTouchStart);\n      wrapper.removeEventListener('touchmove', handleTouchMove);\n      wrapper.removeEventListener('touchend', handleTouchEnd);\n      wrapper.removeEventListener('touchcancel', handleTouchEnd);\n    };\n  }, [doEnd, onCancel, onStart]);\n\n  const isCancel = status === 'willCancel';\n  const wavesStyle = { transform: `scale(${(volume || 1) / 100 + 1})` };\n\n  return (\n    <div className={clsx('Recorder', { 'Recorder--cancel': isCancel })} ref={btnRef}>\n      {status !== 'inited' && (\n        <Flex className=\"RecorderToast\" direction=\"column\" center>\n          <div className=\"RecorderToast-waves\" hidden={status !== 'recording'} style={wavesStyle}>\n            <Icon className=\"RecorderToast-wave-1\" type=\"hexagon\" />\n            <Icon className=\"RecorderToast-wave-2\" type=\"hexagon\" />\n            <Icon className=\"RecorderToast-wave-3\" type=\"hexagon\" />\n          </div>\n          <Icon className=\"RecorderToast-icon\" type={isCancel ? 'cancel' : 'mic'} />\n          <span>{trans(isCancel ? 'release2cancel' : 'releaseOrSwipe')}</span>\n        </Flex>\n      )}\n      <div className=\"Recorder-btn\" role=\"button\" aria-label={trans('hold2talk')}>\n        <span>{trans(btnTextMap[status])}</span>\n      </div>\n    </div>\n  );\n});\n","import React from 'react';\nimport { ClickOutside } from '../ClickOutside';\n\ninterface AccessoryWrapProps {\n  onClickOutside: () => void;\n  children: React.ReactNode;\n}\n\nexport const AccessoryWrap = ({ onClickOutside, children }: AccessoryWrapProps) => (\n  <ClickOutside onClick={onClickOutside}>{children}</ClickOutside>\n);\n","import React, { useState, useEffect, useCallback } from 'react';\nimport { createPortal } from 'react-dom';\nimport clsx from 'clsx';\nimport useMount from '../../hooks/useMount';\nimport useClickOutside from '../../hooks/useClickOutside';\nimport useWindowResize from '../../hooks/useWindowResize';\n\nexport type PopoverProps = {\n  className?: string;\n  active: boolean;\n  target: HTMLElement;\n  onClose: () => void;\n};\n\nexport const Popover: React.FC<PopoverProps> = (props) => {\n  const { className, active, target, children, onClose } = props;\n  const wrapper = useClickOutside(onClose, 'mousedown');\n  const { didMount, isShow } = useMount({ active, ref: wrapper });\n  const [style, setStyle] = useState({});\n\n  const updatePos = useCallback(() => {\n    if (!wrapper.current) return;\n\n    const targetRect = target.getBoundingClientRect();\n    const rect = wrapper.current.getBoundingClientRect();\n\n    setStyle({\n      top: `${targetRect.top - rect.height}px`,\n      left: `${targetRect.left}px`,\n    });\n  }, [target, wrapper]);\n\n  useEffect(() => {\n    if (wrapper.current) {\n      wrapper.current.focus();\n      updatePos();\n    }\n  }, [didMount, updatePos, wrapper]);\n\n  useWindowResize(updatePos);\n\n  if (!didMount) return null;\n\n  return createPortal(\n    <div className={clsx('Popover', className, { active: isShow })} ref={wrapper} style={style}>\n      <div className=\"Popover-body\">{children}</div>\n      <svg className=\"Popover-arrow\" viewBox=\"0 0 9 5\">\n        <polygon points=\"0,0 5,5, 9,0\" />\n      </svg>\n    </div>,\n    document.body,\n  );\n};\n","import { useEffect, useRef } from 'react';\n\nexport default function useClickOutside<T extends HTMLElement = any>(\n  handler: (event: any) => void,\n  eventName: string = 'click',\n) {\n  const ref = useRef<T>();\n\n  useEffect(() => {\n    const listener = (e: any) => {\n      const targetElement = ref.current;\n\n      if (!targetElement || targetElement.contains(e.target)) {\n        return;\n      }\n      if (handler) {\n        handler(e);\n      }\n    };\n\n    document.addEventListener(eventName, listener);\n\n    return () => {\n      document.removeEventListener(eventName, listener);\n    };\n  }, [eventName, handler]);\n\n  return ref;\n}\n","import { useEffect, useRef } from 'react';\n\nexport default function useWindowResize(handler: () => void) {\n  const running = useRef(false);\n\n  useEffect(() => {\n    function runCallback() {\n      handler();\n      running.current = false;\n    }\n\n    function resizeThrottler() {\n      if (!running.current) {\n        running.current = true;\n\n        if (window.requestAnimationFrame) {\n          window.requestAnimationFrame(runCallback);\n        } else {\n          setTimeout(runCallback, 66);\n        }\n      }\n    }\n\n    window.addEventListener('resize', resizeThrottler);\n    return () => {\n      window.removeEventListener('resize', resizeThrottler);\n    };\n  }, [handler]);\n}\n","import React from 'react';\nimport { IconButton, IconButtonProps } from '../IconButton';\n\nexport const Action: React.FC<IconButtonProps> = (props) => (\n  <div className=\"Composer-actions\" data-action-icon={props.icon}>\n    <IconButton size=\"lg\" {...props} />\n  </div>\n);\n","import React from 'react';\nimport { ToolbarItemProps } from '../Toolbar';\nimport { Action } from './Action';\n\ntype IToolbarItem = {\n  item: ToolbarItemProps;\n  onClick: (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\n};\n\nexport const ToolbarItem: React.FC<IToolbarItem> = (props) => {\n  const { item, onClick } = props;\n\n  return (\n    <Action\n      icon={item.icon}\n      img={item.img}\n      data-icon={item.icon}\n      data-tooltip={item.title || null}\n      aria-label={item.title}\n      onClick={onClick}\n    />\n  );\n};\n","import React, { useState, useEffect } from 'react';\nimport { Modal } from '../Modal';\nimport { Flex } from '../Flex';\nimport { useLocale } from '../LocaleProvider';\n\nexport type SendConfirmProps = {\n  file: Blob;\n  onCancel: () => void;\n  onSend: () => void;\n};\n\nexport const SendConfirm: React.FC<SendConfirmProps> = (props) => {\n  const { file, onCancel, onSend } = props;\n  const [img, setImg] = useState('');\n  const { trans } = useLocale('SendConfirm');\n\n  useEffect(() => {\n    const reader = new FileReader();\n    reader.onload = (e: ProgressEvent<FileReader>) => {\n      if (e.target) {\n        setImg(e.target.result as string);\n      }\n    };\n    reader.readAsDataURL(file);\n  }, [file]);\n\n  return (\n    <Modal\n      className=\"SendConfirm\"\n      title={trans('title')}\n      active={!!img}\n      vertical={false}\n      actions={[\n        {\n          label: trans('cancel'),\n          onClick: onCancel,\n        },\n        {\n          label: trans('send'),\n          color: 'primary',\n          onClick: onSend,\n        },\n      ]}\n    >\n      <Flex className=\"SendConfirm-inner\" center>\n        <img src={img} alt=\"\" />\n      </Flex>\n    </Modal>\n  );\n};\n","const ua = navigator.userAgent;\nconst iOS = /iPad|iPhone|iPod/.test(ua);\n\nfunction uaIncludes(str: string) {\n  return ua.indexOf(str) !== -1;\n}\n\nfunction testScrollType() {\n  if (iOS) {\n    if (uaIncludes('Safari/') || /OS 11_[0-3]\\D/.test(ua)) {\n      /**\n       * 不处理\n       * - Safari\n       * - iOS 11.0-11.3（`scrollTop`/`scrolIntoView` 有 bug）\n       */\n      return 0;\n    }\n    // 用 `scrollTop` 的方式\n    return 1;\n  }\n  // 其它的用 `scrollIntoView` 的方式\n  return 2;\n}\n\nexport default function riseInput(input: HTMLElement, target: HTMLElement) {\n  const scrollType = testScrollType();\n  let scrollTimer: ReturnType<typeof setTimeout>;\n\n  if (!target) {\n    // eslint-disable-next-line no-param-reassign\n    target = input;\n  }\n\n  const scrollIntoView = () => {\n    if (scrollType === 0) return;\n    if (scrollType === 1) {\n      document.body.scrollTop = document.body.scrollHeight;\n    } else {\n      target.scrollIntoView(false);\n    }\n  };\n\n  input.addEventListener('focus', () => {\n    setTimeout(scrollIntoView, 300);\n    scrollTimer = setTimeout(scrollIntoView, 1000);\n  });\n\n  input.addEventListener('blur', () => {\n    clearTimeout(scrollTimer);\n\n    // 某些情况下收起键盘后输入框不收回，页面下面空白\n    // 比如：闲鱼、大麦、乐动力、微信\n    if (scrollType && iOS) {\n      // 以免点击快捷短语无效\n      setTimeout(() => {\n        document.body.scrollIntoView();\n      });\n    }\n  });\n}\n","import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport clsx from 'clsx';\nimport { Input, InputProps } from '../Input';\nimport { SendConfirm } from '../SendConfirm';\nimport riseInput from './riseInput';\nimport parseDataTransfer from '../../utils/parseDataTransfer';\nimport canUse from '../../utils/canUse';\n\nconst canTouch = canUse('touch');\n\ninterface ComposerInputProps extends InputProps {\n  invisible: boolean;\n  inputRef: React.MutableRefObject<HTMLTextAreaElement>;\n  onImageSend?: (file: File) => Promise<any>;\n}\n\nexport const ComposerInput = ({\n  inputRef,\n  invisible,\n  onImageSend,\n  ...rest\n}: ComposerInputProps) => {\n  const [pastedImage, setPastedImage] = useState<File | null>(null);\n  const wrapRef = useRef<HTMLDivElement>(null);\n\n  const handlePaste = useCallback((e: React.ClipboardEvent<any>) => {\n    parseDataTransfer(e, setPastedImage);\n  }, []);\n\n  const handleImageCancel = useCallback(() => {\n    setPastedImage(null);\n  }, []);\n\n  const handleImageSend = useCallback(() => {\n    if (onImageSend && pastedImage) {\n      Promise.resolve(onImageSend(pastedImage)).then(() => {\n        setPastedImage(null);\n      });\n    }\n  }, [onImageSend, pastedImage]);\n\n  useEffect(() => {\n    if (canTouch && inputRef.current && wrapRef.current) {\n      riseInput(inputRef.current, wrapRef.current);\n    }\n  }, [inputRef]);\n\n  return (\n    <div className={clsx({ 'S--invisible': invisible })} ref={wrapRef}>\n      <Input\n        className=\"Composer-input\"\n        rows={1}\n        autoSize\n        enterKeyHint=\"send\"\n        onPaste={onImageSend ? handlePaste : undefined}\n        ref={inputRef}\n        {...rest}\n      />\n      {pastedImage && (\n        <SendConfirm file={pastedImage} onCancel={handleImageCancel} onSend={handleImageSend} />\n      )}\n    </div>\n  );\n};\n","export default function parseDataTransfer(\n  e: React.ClipboardEvent<HTMLInputElement>,\n  callback: (file: File) => void,\n) {\n  // const dataTransfer = e.dataTransfer || e.clipboardData;\n  const { items } = e.clipboardData;\n  if (items && items.length) {\n    // eslint-disable-next-line no-plusplus\n    for (let i = 0; i < items.length; i++) {\n      const item = items[i];\n\n      if (item.type.indexOf('image') !== -1) {\n        const file = item.getAsFile();\n        if (file) {\n          callback(file);\n        }\n        e.preventDefault();\n        break;\n      }\n    }\n  }\n}\n","import React from 'react';\nimport { Button } from '../Button';\nimport { useLocale } from '../LocaleProvider';\n\ninterface SendButtonProps {\n  disabled: boolean;\n  onClick: (e: React.MouseEvent<HTMLButtonElement>) => void;\n}\n\nexport const SendButton = ({ disabled, onClick }: SendButtonProps) => {\n  const { trans } = useLocale('Composer');\n  return (\n    <div className=\"Composer-actions\">\n      <Button\n        className=\"Composer-sendBtn\"\n        disabled={disabled}\n        onMouseDown={onClick}\n        color=\"primary\"\n      >\n        {trans('send')}\n      </Button>\n    </div>\n  );\n};\n","import React, { useState, useRef, useEffect, useImperativeHandle, useCallback } from 'react';\nimport clsx from 'clsx';\nimport { IconButtonProps } from '../IconButton';\nimport { Recorder, RecorderProps } from '../Recorder';\nimport { Toolbar, ToolbarItemProps } from '../Toolbar';\nimport { AccessoryWrap } from './AccessoryWrap';\nimport { Popover } from '../Popover';\nimport { InputProps } from '../Input';\nimport { ToolbarItem } from './ToolbarItem';\nimport { ComposerInput } from './ComposerInput';\nimport { SendButton } from './SendButton';\nimport { Action } from './Action';\nimport toggleClass from '../../utils/toggleClass';\n\nexport const CLASS_NAME_FOCUSING = 'S--focusing';\n\nexport type InputType = 'voice' | 'text';\n\nexport type ComposerProps = {\n  wideBreakpoint?: string;\n  text?: string;\n  inputOptions?: InputProps;\n  placeholder?: string;\n  inputType?: InputType;\n  onInputTypeChange?: (inputType: InputType) => void;\n  recorder?: RecorderProps;\n  onSend: (type: string, content: string) => void;\n  onImageSend?: (file: File) => Promise<any>;\n  onFocus?: (event: React.FocusEvent<HTMLTextAreaElement>) => void;\n  onChange?: (value: string, event: React.ChangeEvent<Element>) => void;\n  onBlur?: (event: React.FocusEvent<HTMLTextAreaElement>) => void;\n  toolbar?: ToolbarItemProps[];\n  onToolbarClick?: (item: ToolbarItemProps, event: React.MouseEvent) => void;\n  onAccessoryToggle?: (isAccessoryOpen: boolean) => void;\n  rightAction?: IconButtonProps;\n};\n\nexport interface ComposerHandle {\n  setText: (text: string) => void;\n}\n\nexport const Composer = React.forwardRef<ComposerHandle, ComposerProps>((props, ref) => {\n  const {\n    text: initialText = '',\n    inputType: initialInputType = 'text',\n    wideBreakpoint,\n    placeholder = '请输入...',\n    recorder = {},\n    onInputTypeChange,\n    onFocus,\n    onBlur,\n    onChange,\n    onSend,\n    onImageSend,\n    onAccessoryToggle,\n    toolbar = [],\n    onToolbarClick,\n    rightAction,\n    inputOptions,\n  } = props;\n\n  const [text, setText] = useState(initialText);\n  const [inputType, setInputType] = useState(initialInputType || 'text');\n  const [isAccessoryOpen, setAccessoryOpen] = useState(false);\n  const [accessoryContent, setAccessoryContent] = useState('');\n  const inputRef = useRef<HTMLTextAreaElement>(null!);\n  const focused = useRef(false);\n  const blurTimer = useRef<any>();\n  const popoverTarget = useRef<any>();\n  const isMountRef = useRef(false);\n  const [isWide, setWide] = useState(false);\n\n  useEffect(() => {\n    const mq =\n      wideBreakpoint && window.matchMedia\n        ? window.matchMedia(`(min-width: ${wideBreakpoint})`)\n        : false;\n\n    function handleMq(e: MediaQueryListEvent) {\n      setWide(e.matches);\n    }\n\n    setWide(mq && mq.matches);\n\n    if (mq) {\n      mq.addListener(handleMq);\n    }\n    return () => {\n      if (mq) {\n        mq.removeListener(handleMq);\n      }\n    };\n  }, [wideBreakpoint]);\n\n  useEffect(() => {\n    toggleClass('S--wide', isWide);\n    if (!isWide) {\n      setAccessoryContent('');\n    }\n  }, [isWide]);\n\n  useEffect(() => {\n    if (isMountRef.current && onAccessoryToggle) {\n      onAccessoryToggle(isAccessoryOpen);\n    }\n  }, [isAccessoryOpen, onAccessoryToggle]);\n\n  useEffect(() => {\n    isMountRef.current = true;\n  }, []);\n\n  useImperativeHandle(ref, () => ({\n    setText,\n  }));\n\n  const handleInputTypeChange = useCallback(() => {\n    const isVoice = inputType === 'voice';\n    const nextType = isVoice ? 'text' : 'voice';\n    setInputType(nextType);\n\n    if (isVoice) {\n      const input = inputRef.current;\n      input.focus();\n      // eslint-disable-next-line no-multi-assign\n      input.selectionStart = input.selectionEnd = input.value.length;\n    }\n    if (onInputTypeChange) {\n      onInputTypeChange(nextType);\n    }\n  }, [inputType, onInputTypeChange]);\n\n  const handleInputFocus = useCallback(\n    (e: React.FocusEvent<HTMLTextAreaElement>) => {\n      clearTimeout(blurTimer.current);\n      toggleClass(CLASS_NAME_FOCUSING, true);\n      focused.current = true;\n\n      if (onFocus) {\n        onFocus(e);\n      }\n    },\n    [onFocus],\n  );\n\n  const handleInputBlur = useCallback(\n    (e: React.FocusEvent<HTMLTextAreaElement>) => {\n      blurTimer.current = setTimeout(() => {\n        toggleClass(CLASS_NAME_FOCUSING, false);\n        focused.current = false;\n      }, 0);\n\n      if (onBlur) {\n        onBlur(e);\n      }\n    },\n    [onBlur],\n  );\n\n  const send = useCallback(() => {\n    onSend('text', text);\n    setText('');\n\n    if (focused.current) {\n      inputRef.current.focus();\n    }\n  }, [onSend, text]);\n\n  const handleInputKeyDown = useCallback(\n    (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n      if (!e.shiftKey && e.keyCode === 13) {\n        send();\n        e.preventDefault();\n      }\n    },\n    [send],\n  );\n\n  const handleTextChange = useCallback(\n    (value: string, e: React.ChangeEvent) => {\n      setText(value);\n\n      if (onChange) {\n        onChange(value, e);\n      }\n    },\n    [onChange],\n  );\n\n  const handleSendBtnClick = useCallback(\n    (e: React.MouseEvent<HTMLButtonElement>) => {\n      send();\n      e.preventDefault();\n    },\n    [send],\n  );\n\n  const handleAccessoryToggle = useCallback(() => {\n    setAccessoryOpen(!isAccessoryOpen);\n  }, [isAccessoryOpen]);\n\n  const handleAccessoryBlur = useCallback(() => {\n    setTimeout(() => {\n      setAccessoryOpen(false);\n      setAccessoryContent('');\n    });\n  }, []);\n\n  const handleToolbarClick = useCallback(\n    (item: ToolbarItemProps, e: React.MouseEvent) => {\n      if (onToolbarClick) {\n        onToolbarClick(item, e);\n      }\n      if (item.render) {\n        popoverTarget.current = e.currentTarget;\n        setAccessoryContent(item.render);\n      }\n    },\n    [onToolbarClick],\n  );\n\n  const handlePopoverClose = useCallback(() => {\n    setAccessoryContent('');\n  }, []);\n\n  const isInputText = inputType === 'text';\n  const inputTypeIcon = isInputText ? 'volume-circle' : 'keyboard-circle';\n  const hasToolbar = toolbar.length > 0;\n\n  const inputProps = {\n    ...inputOptions,\n    value: text,\n    inputRef,\n    placeholder,\n    onFocus: handleInputFocus,\n    onBlur: handleInputBlur,\n    onKeyDown: handleInputKeyDown,\n    onChange: handleTextChange,\n    onImageSend,\n  };\n\n  if (isWide) {\n    return (\n      <div className=\"Composer Composer--lg\">\n        {hasToolbar &&\n          toolbar.map((item) => (\n            <ToolbarItem item={item} onClick={(e) => handleToolbarClick(item, e)} key={item.type} />\n          ))}\n        {accessoryContent && (\n          <Popover\n            active={!!accessoryContent}\n            target={popoverTarget.current}\n            onClose={handlePopoverClose}\n          >\n            {accessoryContent}\n          </Popover>\n        )}\n        <div className=\"Composer-inputWrap\">\n          <ComposerInput invisible={false} {...inputProps} />\n        </div>\n        <SendButton onClick={handleSendBtnClick} disabled={!text} />\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <div className=\"Composer\">\n        {recorder.canRecord && (\n          <Action\n            className=\"Composer-inputTypeBtn\"\n            data-icon={inputTypeIcon}\n            icon={inputTypeIcon}\n            onClick={handleInputTypeChange}\n            aria-label={isInputText ? '切换到语音输入' : '切换到键盘输入'}\n          />\n        )}\n        <div className=\"Composer-inputWrap\">\n          <ComposerInput invisible={!isInputText} {...inputProps} />\n          {!isInputText && <Recorder {...recorder} />}\n        </div>\n        {!text && rightAction && <Action {...rightAction} />}\n        {hasToolbar && (\n          <Action\n            className={clsx('Composer-toggleBtn', {\n              active: isAccessoryOpen,\n            })}\n            icon=\"plus-circle\"\n            onClick={handleAccessoryToggle}\n            aria-label={isAccessoryOpen ? '关闭工具栏' : '展开工具栏'}\n          />\n        )}\n        {text && <SendButton onClick={handleSendBtnClick} disabled={false} />}\n      </div>\n      {isAccessoryOpen && (\n        <AccessoryWrap onClickOutside={handleAccessoryBlur}>\n          {accessoryContent || <Toolbar items={toolbar} onClick={handleToolbarClick} />}\n        </AccessoryWrap>\n      )}\n    </>\n  );\n});\n","import React, { useEffect } from 'react';\nimport { LocaleProvider } from '../LocaleProvider';\nimport { Navbar, NavbarProps } from '../Navbar';\nimport {\n  MessageContainer,\n  MessageContainerProps,\n  MessageContainerHandle,\n} from '../MessageContainer';\nimport { QuickReplies, QuickReplyItemProps } from '../QuickReplies';\nimport { Composer as DComposer, ComposerProps, ComposerHandle } from '../Composer';\nimport isSafari from '../../utils/isSafari';\n\nexport type ChatProps = Omit<ComposerProps, 'onFocus' | 'onChange' | 'onBlur'> &\n  MessageContainerProps & {\n    /**\n     * 宽版模式断点\n     */\n    // wideBreakpoint?: string;\n    /**\n     * 当前语言\n     */\n    locale?: string;\n    /**\n     * 多语言\n     */\n    locales?: any; // FIXME\n    /**\n     * 导航栏配置\n     */\n    navbar?: NavbarProps;\n    /**\n     * 导航栏渲染函数\n     */\n    renderNavbar?: () => React.ReactNode;\n    /**\n     * 加载更多文案\n     */\n    // loadMoreText?: string;\n    /**\n     * 在消息列表上面的渲染函数\n     */\n    // renderBeforeMessageList?: () => React.ReactNode;\n    /**\n     * 消息列表 ref\n     */\n    messagesRef?: React.RefObject<MessageContainerHandle>;\n    /**\n     * 下拉加载回调\n     */\n    // onRefresh?: () => Promise<any>;\n    /**\n     * 滚动消息列表回调\n     */\n    // onScroll?: (event: React.UIEvent<HTMLDivElement, UIEvent>) => void;\n    /**\n     * 消息列表\n     */\n    // messages: MessageProps[];\n    /**\n     * 消息内容渲染函数\n     */\n    // renderMessageContent: (message: MessageProps) => React.ReactNode;\n    /**\n     * 快捷短语\n     */\n    quickReplies?: QuickReplyItemProps[];\n    /**\n     * 快捷短语是否可见\n     */\n    quickRepliesVisible?: boolean;\n    /**\n     * 快捷短语的点击回调\n     */\n    onQuickReplyClick?: (item: QuickReplyItemProps, index: number) => void;\n    /**\n     * 快捷短语的滚动回调\n     */\n    onQuickReplyScroll?: () => void;\n    /**\n     * 快捷短语渲染函数\n     */\n    renderQuickReplies?: () => void;\n    /**\n     * 输入区 ref\n     */\n    composerRef?: React.RefObject<ComposerHandle>;\n    /**\n     * 输入框初始内容\n     */\n    // text?: string;\n    /**\n     * 输入框占位符\n     */\n    // placeholder?: string;\n    /**\n     * 输入框聚焦回调\n     */\n    onInputFocus?: ComposerProps['onFocus'];\n    /**\n     * 输入框更新回调\n     */\n    onInputChange?: ComposerProps['onChange'];\n    /**\n     * 输入框失去焦点回调\n     */\n    onInputBlur?: ComposerProps['onBlur'];\n    /**\n     * 发送消息回调\n     */\n    // onSend: (type: string, content: string) => void;\n    /**\n     * 发送图片回调\n     */\n    // onImageSend?: (file: File) => Promise<any>;\n    /**\n     * 输入方式\n     */\n    // inputType?: InputType;\n    /**\n     * 输入方式切换回调\n     */\n    // onInputTypeChange?: () => void;\n    /**\n     * 语音输入\n     */\n    // recorder?: RecorderProps;\n    /**\n     * 工具栏\n     */\n    // toolbar?: ToolbarItemProps[];\n    /**\n     * 点击工具栏回调\n     */\n    // onToolbarClick?: () => void;\n    /**\n     * 点击附加内容回调\n     */\n    // onAccessoryToggle?: () => void;\n    /**\n     * 输入组件\n     */\n    Composer?: React.ElementType; // FIXME\n  };\n\nexport const Chat = React.forwardRef<HTMLDivElement, ChatProps>((props, ref) => {\n  const {\n    wideBreakpoint,\n    locale = 'zh-CN',\n    locales,\n    navbar,\n    renderNavbar,\n    loadMoreText,\n    renderBeforeMessageList,\n    messagesRef,\n    onRefresh,\n    onScroll,\n    messages = [],\n    renderMessageContent,\n    onBackBottomShow,\n    onBackBottomClick,\n    quickReplies = [],\n    quickRepliesVisible,\n    onQuickReplyClick = () => {},\n    onQuickReplyScroll,\n    renderQuickReplies,\n    text,\n    placeholder,\n    onInputFocus,\n    onInputChange,\n    onInputBlur,\n    onSend,\n    onImageSend,\n    inputOptions,\n    composerRef,\n    inputType,\n    onInputTypeChange,\n    recorder,\n    toolbar,\n    onToolbarClick,\n    onAccessoryToggle,\n    rightAction,\n    Composer = DComposer,\n  } = props;\n\n  function handleInputFocus(e: React.FocusEvent<HTMLTextAreaElement>) {\n    if (messagesRef && messagesRef.current) {\n      messagesRef.current.scrollToEnd({ animated: false, force: true });\n    }\n    if (onInputFocus) {\n      onInputFocus(e);\n    }\n  }\n\n  useEffect(() => {\n    if (isSafari()) {\n      document.documentElement.dataset.safari = '';\n    }\n  }, []);\n\n  return (\n    <LocaleProvider locale={locale} locales={locales}>\n      <div className=\"ChatApp\" ref={ref}>\n        {renderNavbar ? renderNavbar() : navbar && <Navbar {...navbar} />}\n        <MessageContainer\n          ref={messagesRef}\n          loadMoreText={loadMoreText}\n          messages={messages}\n          renderBeforeMessageList={renderBeforeMessageList}\n          renderMessageContent={renderMessageContent}\n          onRefresh={onRefresh}\n          onScroll={onScroll}\n          onBackBottomShow={onBackBottomShow}\n          onBackBottomClick={onBackBottomClick}\n        />\n        <div className=\"ChatFooter\">\n          {renderQuickReplies ? (\n            renderQuickReplies()\n          ) : (\n            <QuickReplies\n              items={quickReplies}\n              visible={quickRepliesVisible}\n              onClick={onQuickReplyClick}\n              onScroll={onQuickReplyScroll}\n            />\n          )}\n          <Composer\n            wideBreakpoint={wideBreakpoint}\n            ref={composerRef}\n            inputType={inputType}\n            text={text}\n            inputOptions={inputOptions}\n            placeholder={placeholder}\n            onAccessoryToggle={onAccessoryToggle}\n            recorder={recorder}\n            toolbar={toolbar}\n            onToolbarClick={onToolbarClick}\n            onInputTypeChange={onInputTypeChange}\n            onFocus={handleInputFocus}\n            onChange={onInputChange}\n            onBlur={onInputBlur}\n            onSend={onSend}\n            onImageSend={onImageSend}\n            rightAction={rightAction}\n          />\n        </div>\n      </div>\n    </LocaleProvider>\n  );\n});\n","export default () => /^((?!chrome|android|crios|fxios).)*safari/i.test(navigator.userAgent);\n","import React from \"react\";\nimport Chat, { Bubble, useMessages } from \"./chatui/index\";\nimport {useCookies} from 'react-cookie';\nimport {default as axios} from \"axios\";\n\nexport default function App() {\n    const {messages, appendMsg, setTyping} = useMessages([]);\n    const axios = require('axios').default;\n    const [cookies, setCookie, removeCookie] = useCookies(['userId']);\n    const short = require('short-uuid');\n\n    function getTempId() {\n        if (cookies.userId) return cookies.userId; else {\n            const userId = short.generate();\n            setCookie(\"userId\", userId);\n            return userId;\n        }\n    }\n\n    function handleSend(type, val) {\n        if (type === \"text\" && val.trim()) {\n            appendMsg({\n                type: \"text\", content: {text: val}, position: \"right\",\n                user: {avatar: 'static/user-80.png'},\n                src: \"user\"\n            });\n            setTimeout(() => {\n                setTyping(true);\n                axios.post('http://35.153.232.28:5000/v1/chat/completions', {\n                    msg: val, userId: getTempId()\n                })\n                    .then(function (response) {\n                        console.log('请求成功');\n                        console.log(response);\n                        appendMsg({\n                            type: \"text\",\n                            content: {text: response.data.choices[0].message.content},\n                            user: {avatar: \"static/ChatGPT_logo.png\"},\n                            src: \"chatGPT\"\n                        });\n                    })\n                    .catch(function (error) {\n                        appendMsg({\n                            type: \"text\", content: {text: error.toString()},\n                            user: {avatar: \"static/ChatGPT_logo.png\"},\n                            src: \"chatGPT\"\n                        });\n                        console.log(error);\n                    });\n            }, 10);\n        }\n    }\n\n\n    function renderMessageContent(msg) {\n        const {content} = msg;\n        return <Bubble content={content.text}/>;\n    }\n\n\n    return (<Chat id={\"left\"}\n                  width={\"50%\"}\n                  navbar={{title: \"智能助理：写作、翻译、写代码、阅读理解、文档摘要、口语书面化、百科问答\"}}\n                  messages={messages}\n                  renderMessageContent={renderMessageContent}\n                  onSend={handleSend}\n    />);\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\nimport \"./styles.css\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  rootElement\n);\n"],"sourceRoot":""}